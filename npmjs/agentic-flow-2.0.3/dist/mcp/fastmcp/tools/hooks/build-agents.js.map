{"version":3,"file":"build-agents.js","sourceRoot":"","sources":["../../../../../src/mcp/fastmcp/tools/hooks/build-agents.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Build Agents Hook - Generate optimized agent configurations\n * Creates YAML agent definitions based on pretrain analysis\n */\n\nimport { z } from 'zod';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport type { ToolDefinition } from '../../types/index.js';\nimport { loadIntelligence } from './shared.js';\n\n// Focus mode configurations\nconst focusConfigs: Record<string, {\n  description: string;\n  priorities: string[];\n  temperature: number;\n}> = {\n  quality: {\n    description: 'Emphasizes code quality, best practices, and maintainability',\n    priorities: ['code-review', 'refactoring', 'documentation', 'testing'],\n    temperature: 0.3\n  },\n  speed: {\n    description: 'Optimized for rapid development and iteration',\n    priorities: ['implementation', 'prototyping', 'quick-fixes'],\n    temperature: 0.7\n  },\n  security: {\n    description: 'Security-first development with vulnerability awareness',\n    priorities: ['security-audit', 'input-validation', 'authentication', 'encryption'],\n    temperature: 0.2\n  },\n  testing: {\n    description: 'Test-driven development with comprehensive coverage',\n    priorities: ['unit-tests', 'integration-tests', 'e2e-tests', 'mocking'],\n    temperature: 0.4\n  },\n  fullstack: {\n    description: 'Balanced full-stack development capabilities',\n    priorities: ['frontend', 'backend', 'database', 'api-design'],\n    temperature: 0.5\n  }\n};\n\ninterface AgentConfig {\n  name: string;\n  type: string;\n  description: string;\n  capabilities: string[];\n  focus: string[];\n  temperature: number;\n  systemPrompt?: string;\n}\n\nexport const hookBuildAgentsTool: ToolDefinition = {\n  name: 'hook_build_agents',\n  description: 'Generate optimized agent configurations from pretrain data',\n  parameters: z.object({\n    focus: z.enum(['quality', 'speed', 'security', 'testing', 'fullstack'])\n      .optional()\n      .default('quality')\n      .describe('Focus mode for agent generation'),\n    output: z.string().optional().default('.claude/agents').describe('Output directory'),\n    includePrompts: z.boolean().optional().default(true).describe('Include system prompts'),\n    format: z.enum(['yaml', 'json']).optional().default('yaml').describe('Output format')\n  }),\n  execute: async ({ focus, output, includePrompts, format }, { onProgress }) => {\n    const startTime = Date.now();\n    const intel = loadIntelligence();\n    const focusConfig = focusConfigs[focus];\n\n    onProgress?.({ progress: 0.1, message: 'Analyzing patterns...' });\n\n    // Detect languages from patterns\n    const detectedLangs = new Set<string>();\n    const detectedFrameworks = new Set<string>();\n\n    for (const state of Object.keys(intel.patterns)) {\n      if (state.includes('.rs')) detectedLangs.add('rust');\n      if (state.includes('.ts') || state.includes('.js')) detectedLangs.add('typescript');\n      if (state.includes('.tsx') || state.includes('.jsx')) detectedFrameworks.add('react');\n      if (state.includes('.py')) detectedLangs.add('python');\n      if (state.includes('.go')) detectedLangs.add('go');\n      if (state.includes('.vue')) detectedFrameworks.add('vue');\n      if (state.includes('.sql')) detectedFrameworks.add('database');\n    }\n\n    onProgress?.({ progress: 0.3, message: 'Generating agent configs...' });\n\n    const agents: AgentConfig[] = [];\n\n    // Language-specific agents\n    if (detectedLangs.has('rust')) {\n      agents.push({\n        name: 'rust-specialist',\n        type: 'rust-developer',\n        description: 'Rust development specialist for this codebase',\n        capabilities: ['cargo', 'unsafe-rust', 'async-rust', 'wasm', 'error-handling'],\n        focus: focusConfig.priorities,\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a Rust specialist.\nFocus on: memory safety, zero-cost abstractions, idiomatic Rust patterns.\nUse cargo conventions, prefer Result over panic, leverage the type system.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    if (detectedLangs.has('typescript')) {\n      agents.push({\n        name: 'typescript-specialist',\n        type: 'typescript-developer',\n        description: 'TypeScript development specialist',\n        capabilities: ['types', 'generics', 'decorators', 'async-await', 'modules'],\n        focus: focusConfig.priorities,\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a TypeScript specialist.\nFocus on: strict typing, type inference, generic patterns, module organization.\nPrefer type safety over any, use discriminated unions, leverage utility types.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    if (detectedLangs.has('python')) {\n      agents.push({\n        name: 'python-specialist',\n        type: 'python-developer',\n        description: 'Python development specialist',\n        capabilities: ['typing', 'async', 'testing', 'packaging', 'data-science'],\n        focus: focusConfig.priorities,\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a Python specialist.\nFocus on: type hints, PEP standards, pythonic idioms, virtual environments.\nUse dataclasses, prefer pathlib, leverage context managers.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    if (detectedLangs.has('go')) {\n      agents.push({\n        name: 'go-specialist',\n        type: 'go-developer',\n        description: 'Go development specialist',\n        capabilities: ['goroutines', 'channels', 'interfaces', 'testing', 'modules'],\n        focus: focusConfig.priorities,\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a Go specialist.\nFocus on: simplicity, explicit error handling, goroutines, interface composition.\nFollow Go conventions, use go fmt, prefer composition over inheritance.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    // Framework-specific agents\n    if (detectedFrameworks.has('react')) {\n      agents.push({\n        name: 'react-specialist',\n        type: 'react-developer',\n        description: 'React/Next.js development specialist',\n        capabilities: ['hooks', 'state-management', 'components', 'ssr', 'testing'],\n        focus: focusConfig.priorities,\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a React specialist.\nFocus on: functional components, hooks, state management, performance optimization.\nPrefer composition, use memo wisely, follow React best practices.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    if (detectedFrameworks.has('database')) {\n      agents.push({\n        name: 'database-specialist',\n        type: 'database-specialist',\n        description: 'Database design and optimization specialist',\n        capabilities: ['schema-design', 'queries', 'indexing', 'migrations', 'orm'],\n        focus: focusConfig.priorities,\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a database specialist.\nFocus on: normalized schemas, efficient queries, proper indexing, data integrity.\nConsider performance implications, use transactions appropriately.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    // Focus-specific agents\n    if (focus === 'testing' || focus === 'quality') {\n      agents.push({\n        name: 'test-architect',\n        type: 'test-engineer',\n        description: 'Testing and quality assurance specialist',\n        capabilities: ['unit-tests', 'integration-tests', 'mocking', 'coverage', 'tdd'],\n        focus: ['testing', 'quality', 'reliability'],\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a testing specialist.\nFocus on: comprehensive test coverage, meaningful assertions, test isolation.\nWrite tests first when possible, mock external dependencies, aim for >80% coverage.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    if (focus === 'security') {\n      agents.push({\n        name: 'security-auditor',\n        type: 'security-specialist',\n        description: 'Security audit and hardening specialist',\n        capabilities: ['vulnerability-scan', 'auth', 'encryption', 'input-validation', 'owasp'],\n        focus: ['security', 'compliance', 'hardening'],\n        temperature: focusConfig.temperature,\n        systemPrompt: includePrompts ? `You are a security specialist.\nFocus on: OWASP top 10, input validation, authentication, authorization, encryption.\nNever trust user input, use parameterized queries, implement defense in depth.\n${focusConfig.description}` : undefined\n      });\n    }\n\n    // Add coordinator\n    agents.push({\n      name: 'project-coordinator',\n      type: 'coordinator',\n      description: 'Coordinates multi-agent workflows for this project',\n      capabilities: ['task-decomposition', 'agent-routing', 'context-management'],\n      focus: focusConfig.priorities,\n      temperature: focusConfig.temperature\n    });\n\n    onProgress?.({ progress: 0.7, message: 'Writing agent files...' });\n\n    // Create output directory\n    const outputDir = path.join(process.cwd(), output || '.claude/agents');\n    if (!fs.existsSync(outputDir)) {\n      fs.mkdirSync(outputDir, { recursive: true });\n    }\n\n    // Write agent files\n    const savedFiles: string[] = [];\n\n    for (const agent of agents) {\n      const filename = `${agent.name}.${format}`;\n      const filePath = path.join(outputDir, filename);\n\n      let content: string;\n      if (format === 'yaml') {\n        content = `# ${agent.description}\nname: ${agent.name}\ntype: ${agent.type}\ndescription: ${agent.description}\ncapabilities:\n${agent.capabilities.map(c => `  - ${c}`).join('\\n')}\nfocus:\n${agent.focus.map(f => `  - ${f}`).join('\\n')}\ntemperature: ${agent.temperature}\n${agent.systemPrompt ? `systemPrompt: |\\n  ${agent.systemPrompt.split('\\n').join('\\n  ')}` : ''}\n`;\n      } else {\n        content = JSON.stringify(agent, null, 2);\n      }\n\n      fs.writeFileSync(filePath, content);\n      savedFiles.push(filename);\n    }\n\n    // Write index file\n    const indexPath = path.join(outputDir, `index.${format}`);\n    if (format === 'yaml') {\n      const indexContent = `# Generated Agent Index\n# Focus: ${focus}\n# Generated: ${new Date().toISOString()}\n\nagents:\n${agents.map(a => `  - ${a.name}`).join('\\n')}\n\ndetected:\n  languages:\n${[...detectedLangs].map(l => `    - ${l}`).join('\\n') || '    - generic'}\n  frameworks:\n${[...detectedFrameworks].map(f => `    - ${f}`).join('\\n') || '    - none'}\n`;\n      fs.writeFileSync(indexPath, indexContent);\n    } else {\n      fs.writeFileSync(indexPath, JSON.stringify({\n        focus,\n        generated: new Date().toISOString(),\n        agents: agents.map(a => a.name),\n        detected: {\n          languages: [...detectedLangs],\n          frameworks: [...detectedFrameworks]\n        }\n      }, null, 2));\n    }\n\n    savedFiles.push(`index.${format}`);\n\n    onProgress?.({ progress: 1.0, message: 'Agent generation complete!' });\n\n    const latency = Date.now() - startTime;\n\n    return {\n      success: true,\n      focus,\n      agentsGenerated: agents.length,\n      agents: agents.map(a => a.name),\n      detectedLanguages: [...detectedLangs],\n      detectedFrameworks: [...detectedFrameworks],\n      savedFiles,\n      outputDir: output,\n      latencyMs: latency,\n      timestamp: new Date().toISOString()\n    };\n  }\n};\n"]}