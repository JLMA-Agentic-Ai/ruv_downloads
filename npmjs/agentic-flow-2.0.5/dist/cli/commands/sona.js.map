{"version":3,"file":"sona.js","sourceRoot":"","sources":["../../../src/cli/commands/sona.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * SONA CLI Commands\n *\n * Command-line interface for SONA (Self-Optimizing Neural Architecture)\n * Provides trajectory management, pattern discovery, and learning control\n */\n\nimport { Command } from 'commander';\nimport {\n  sonaService,\n  sonaServices,\n  createSONAService,\n  SONAProfile\n} from '../../services/sona-service';\n\nexport function createSONACommand(): Command {\n  const sona = new Command('sona');\n\n  sona.description('SONA (Self-Optimizing Neural Architecture) operations');\n\n  // Trajectory commands\n  const trajectory = sona\n    .command('trajectory')\n    .description('Manage learning trajectories');\n\n  trajectory\n    .command('begin')\n    .description('Begin a new learning trajectory')\n    .option('-r, --route <model>', 'LLM route (e.g., claude-sonnet-4-5)')\n    .option('-e, --embedding <file>', 'Embedding file (JSON array)')\n    .option('-d, --dimension <number>', 'Embedding dimension', '1536')\n    .action(async (options) => {\n      let embedding: number[];\n\n      if (options.embedding) {\n        const fs = await import('fs/promises');\n        const data = await fs.readFile(options.embedding, 'utf-8');\n        embedding = JSON.parse(data);\n      } else {\n        // Generate random embedding\n        const dim = parseInt(options.dimension);\n        embedding = Array.from({ length: dim }, () => Math.random());\n      }\n\n      const trajectoryId = sonaService.beginTrajectory(embedding, options.route);\n\n      console.log('‚úÖ Trajectory started');\n      console.log(`   ID: ${trajectoryId}`);\n      if (options.route) {\n        console.log(`   Route: ${options.route}`);\n      }\n    });\n\n  trajectory\n    .command('step')\n    .description('Add a step to a trajectory')\n    .requiredOption('-t, --trajectory-id <id>', 'Trajectory ID')\n    .requiredOption('-a, --activations <file>', 'Activations file (JSON array)')\n    .requiredOption('-w, --weights <file>', 'Attention weights file (JSON array)')\n    .requiredOption('-r, --reward <number>', 'Reward score (0-1)')\n    .action(async (options) => {\n      const fs = await import('fs/promises');\n\n      const activations = JSON.parse(await fs.readFile(options.activations, 'utf-8'));\n      const weights = JSON.parse(await fs.readFile(options.weights, 'utf-8'));\n      const reward = parseFloat(options.reward);\n\n      sonaService.addTrajectoryStep(options.trajectoryId, activations, weights, reward);\n\n      console.log('‚úÖ Step added to trajectory');\n      console.log(`   Trajectory: ${options.trajectoryId}`);\n      console.log(`   Reward: ${reward.toFixed(3)}`);\n    });\n\n  trajectory\n    .command('context')\n    .description('Add context to a trajectory')\n    .requiredOption('-t, --trajectory-id <id>', 'Trajectory ID')\n    .requiredOption('-c, --context <id>', 'Context ID')\n    .action((options) => {\n      sonaService.addTrajectoryContext(options.trajectoryId, options.context);\n\n      console.log('‚úÖ Context added');\n      console.log(`   Trajectory: ${options.trajectoryId}`);\n      console.log(`   Context: ${options.context}`);\n    });\n\n  trajectory\n    .command('end')\n    .description('End a trajectory with quality score')\n    .requiredOption('-t, --trajectory-id <id>', 'Trajectory ID')\n    .requiredOption('-q, --quality <score>', 'Quality score (0-1)')\n    .action((options) => {\n      const quality = parseFloat(options.quality);\n      sonaService.endTrajectory(options.trajectoryId, quality);\n\n      console.log('‚úÖ Trajectory completed');\n      console.log(`   ID: ${options.trajectoryId}`);\n      console.log(`   Quality: ${quality.toFixed(3)}`);\n    });\n\n  trajectory\n    .command('list')\n    .description('List active trajectories')\n    .action(() => {\n      const active = sonaService.getActiveTrajectories();\n\n      console.log(`\\nüìä Active Trajectories: ${active.length}\\n`);\n\n      active.forEach((t, i) => {\n        const duration = Date.now() - t.startTime;\n        console.log(`${i + 1}. ID: ${t.id}`);\n        console.log(`   Route: ${t.route || 'N/A'}`);\n        console.log(`   Steps: ${t.steps.length}`);\n        console.log(`   Contexts: ${t.contexts.length}`);\n        console.log(`   Duration: ${Math.floor(duration / 1000)}s`);\n        console.log('');\n      });\n    });\n\n  // Pattern commands\n  const pattern = sona\n    .command('pattern')\n    .description('Pattern discovery and retrieval');\n\n  pattern\n    .command('find')\n    .description('Find similar patterns')\n    .requiredOption('-q, --query <file>', 'Query embedding file (JSON array)')\n    .option('-k <number>', 'Number of patterns to retrieve', '3')\n    .option('--json', 'Output as JSON')\n    .action(async (options) => {\n      const fs = await import('fs/promises');\n      const query = JSON.parse(await fs.readFile(options.query, 'utf-8'));\n      const k = parseInt(options.k);\n\n      const patterns = sonaService.findPatterns(query, k);\n\n      if (options.json) {\n        console.log(JSON.stringify(patterns, null, 2));\n      } else {\n        console.log(`\\nüîç Found ${patterns.length} similar patterns:\\n`);\n\n        patterns.forEach((p, i) => {\n          console.log(`${i + 1}. Pattern ${p.id}`);\n          console.log(`   Type: ${p.patternType}`);\n          console.log(`   Cluster Size: ${p.clusterSize}`);\n          console.log(`   Avg Quality: ${p.avgQuality.toFixed(3)}`);\n          console.log(`   Similarity: ${p.similarity.toFixed(3)}`);\n          console.log('');\n        });\n      }\n    });\n\n  // Learning commands\n  sona\n    .command('learn')\n    .description('Force learning cycle')\n    .action(() => {\n      const result = sonaService.forceLearn();\n\n      console.log('‚úÖ Learning cycle completed');\n      console.log(`   Patterns learned: ${result.patternsLearned}`);\n    });\n\n  // Statistics commands\n  sona\n    .command('stats')\n    .description('Show SONA statistics')\n    .option('--json', 'Output as JSON')\n    .option('--engine', 'Show engine stats')\n    .action((options) => {\n      if (options.engine) {\n        const engineStats = sonaService.getEngineStats();\n        console.log('\\nüìä SONA Engine Statistics:\\n');\n        console.log(engineStats);\n      } else {\n        const stats = sonaService.getStats();\n\n        if (options.json) {\n          console.log(JSON.stringify(stats, null, 2));\n        } else {\n          console.log('\\nüìä SONA Service Statistics\\n');\n          console.log(`Profile: ${stats.config.profile || 'balanced'}`);\n          console.log('');\n          console.log('Trajectories:');\n          console.log(`  Total: ${stats.totalTrajectories}`);\n          console.log(`  Active: ${stats.activeTrajectories}`);\n          console.log(`  Completed: ${stats.completedTrajectories}`);\n          console.log(`  Utilization: ${(stats.trajectoryUtilization * 100).toFixed(1)}%`);\n          console.log('');\n          console.log('Performance:');\n          console.log(`  Avg Quality: ${stats.avgQualityScore.toFixed(3)}`);\n          console.log(`  Total Ops: ${stats.totalOpsProcessed.toLocaleString()}`);\n          console.log(`  Learning Cycles: ${stats.totalLearningCycles}`);\n          console.log(`  Ops/Second: ${stats.opsPerSecond.toFixed(0)}`);\n          console.log('');\n          console.log('Configuration:');\n          console.log(`  Micro-LoRA Rank: ${stats.config.microLoraRank}`);\n          console.log(`  Base-LoRA Rank: ${stats.config.baseLoraRank}`);\n          console.log(`  Learning Rate: ${stats.config.microLoraLr}`);\n          console.log(`  EWC Lambda: ${stats.config.ewcLambda}`);\n          console.log(`  Pattern Clusters: ${stats.config.patternClusters}`);\n          console.log(`  SIMD Enabled: ${stats.config.enableSimd}`);\n        }\n      }\n    });\n\n  // Profile commands\n  sona\n    .command('profile')\n    .description('Show configuration profiles')\n    .argument('[profile]', 'Profile name (real-time, batch, research, edge, balanced)')\n    .action((profileName?: string) => {\n      if (profileName) {\n        const service = sonaServices[profileName as SONAProfile];\n        if (!service) {\n          console.error(`‚ùå Unknown profile: ${profileName}`);\n          console.error('   Available: real-time, batch, research, edge, balanced');\n          process.exit(1);\n        }\n\n        const stats = service.getStats();\n        console.log(`\\nüìã Profile: ${profileName}\\n`);\n        console.log('Configuration:');\n        console.log(`  Micro-LoRA Rank: ${stats.config.microLoraRank}`);\n        console.log(`  Base-LoRA Rank: ${stats.config.baseLoraRank}`);\n        console.log(`  Learning Rate: ${stats.config.microLoraLr}`);\n        console.log(`  EWC Lambda: ${stats.config.ewcLambda}`);\n        console.log(`  Pattern Clusters: ${stats.config.patternClusters}`);\n        console.log(`  Trajectory Capacity: ${stats.config.trajectoryCapacity}`);\n        console.log(`  Quality Threshold: ${stats.config.qualityThreshold}`);\n        console.log(`  SIMD Enabled: ${stats.config.enableSimd}`);\n      } else {\n        console.log('\\nüìã Available SONA Profiles:\\n');\n\n        console.log('1. real-time');\n        console.log('   ‚Üí 2200 ops/sec, <0.5ms latency');\n        console.log('   ‚Üí Rank-2, 25 clusters, 0.7 threshold');\n        console.log('');\n\n        console.log('2. batch');\n        console.log('   ‚Üí Balance throughput and adaptation');\n        console.log('   ‚Üí Rank-2, rank-8, 5000 capacity');\n        console.log('');\n\n        console.log('3. research');\n        console.log('   ‚Üí +55% quality improvement');\n        console.log('   ‚Üí Rank-16 base, LR 0.002, 0.2 threshold');\n        console.log('');\n\n        console.log('4. edge');\n        console.log('   ‚Üí <5MB memory footprint');\n        console.log('   ‚Üí Rank-1, 200 capacity, 15 clusters');\n        console.log('');\n\n        console.log('5. balanced (default)');\n        console.log('   ‚Üí 18ms overhead, +25% quality');\n        console.log('   ‚Üí Rank-2, rank-8, 0.4 threshold');\n        console.log('');\n      }\n    });\n\n  // Enable/disable commands\n  sona\n    .command('enable')\n    .description('Enable SONA engine')\n    .action(() => {\n      sonaService.setEnabled(true);\n      console.log('‚úÖ SONA engine enabled');\n    });\n\n  sona\n    .command('disable')\n    .description('Disable SONA engine')\n    .action(() => {\n      sonaService.setEnabled(false);\n      console.log('‚è∏Ô∏è  SONA engine disabled');\n    });\n\n  // Benchmark command\n  sona\n    .command('benchmark')\n    .description('Run SONA performance benchmark')\n    .option('-i, --iterations <number>', 'Number of iterations', '1000')\n    .action(async (options) => {\n      const iterations = parseInt(options.iterations);\n\n      console.log(`\\nüî¨ Running SONA Benchmark (${iterations} iterations)\\n`);\n\n      // Benchmark Micro-LoRA\n      const input = Array.from({ length: 3072 }, () => Math.random());\n      const startMicro = Date.now();\n\n      for (let i = 0; i < iterations; i++) {\n        sonaService.applyMicroLora(input);\n      }\n\n      const microTime = Date.now() - startMicro;\n      const microLatency = microTime / iterations;\n      const microOpsPerSec = (iterations / microTime) * 1000;\n\n      console.log('Micro-LoRA:');\n      console.log(`  Total Time: ${microTime}ms`);\n      console.log(`  Avg Latency: ${microLatency.toFixed(3)}ms`);\n      console.log(`  Throughput: ${microOpsPerSec.toFixed(0)} ops/sec`);\n      console.log('');\n\n      // Benchmark Base-LoRA\n      const startBase = Date.now();\n\n      for (let i = 0; i < iterations; i++) {\n        sonaService.applyBaseLora(10, input);\n      }\n\n      const baseTime = Date.now() - startBase;\n      const baseLatency = baseTime / iterations;\n      const baseOpsPerSec = (iterations / baseTime) * 1000;\n\n      console.log('Base-LoRA:');\n      console.log(`  Total Time: ${baseTime}ms`);\n      console.log(`  Avg Latency: ${baseLatency.toFixed(3)}ms`);\n      console.log(`  Throughput: ${baseOpsPerSec.toFixed(0)} ops/sec`);\n      console.log('');\n\n      // Expected performance (from vibecast KEY_FINDINGS)\n      console.log('Expected Performance:');\n      console.log(`  Target Throughput: 2211 ops/sec`);\n      console.log(`  Target Latency: <0.5ms (real-time profile)`);\n      console.log(`  Per-layer Cost: 0.452ms (40 layers)`);\n      console.log('');\n\n      const meetsTarget = microOpsPerSec >= 1000; // At least 1000 ops/sec\n      console.log(meetsTarget ? '‚úÖ Performance meets targets' : '‚ö†Ô∏è  Performance below targets');\n    });\n\n  return sona;\n}\n\nexport default createSONACommand;\n"]}