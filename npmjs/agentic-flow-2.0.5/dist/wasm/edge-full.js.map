{"version":3,"file":"edge-full.js","sourceRoot":"","sources":["../../src/wasm/edge-full.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * RuVector Edge-Full Integration\n *\n * Complete WASM toolkit for edge AI providing:\n *\n * Modules:\n * - edge: Core WASM primitives (HNSW, Identity, Crypto)\n * - graph: Graph database with Cypher/SPARQL/SQL support\n * - rvlite: Lightweight vector operations\n * - sona: Self-learning neural adaptation (SONA)\n * - dag: DAG workflow orchestration\n * - onnx: ONNX embeddings inference\n *\n * Features:\n * - Pure WASM: Runs in browser, Node.js, Cloudflare Workers, Deno\n * - Post-quantum cryptography\n * - P2P swarm coordination\n * - Raft consensus\n * - SIMD acceleration\n *\n * @see https://github.com/ruvnet/ruvector/tree/main/examples/edge-full\n */\n\nimport { logger } from '../utils/logger.js';\n\n// Module state\nlet edgeFullModule: EdgeFullModule | null = null;\nlet initialized = false;\nlet initPromise: Promise<boolean> | null = null;\n\n// ============================================================================\n// Type Definitions\n// ============================================================================\n\n/**\n * Main EdgeFull module interface\n */\ninterface EdgeFullModule {\n  // Sub-modules\n  edge: EdgeModule;\n  graph: GraphModule;\n  rvlite: RvLiteModule;\n  sona: SonaModule;\n  dag: DagModule;\n  onnx: OnnxModule;\n\n  // Top-level utilities\n  isReady: () => boolean;\n  getVersion: () => string;\n}\n\n/**\n * Edge module - Core WASM primitives\n */\ninterface EdgeModule {\n  // WASM initialization\n  default: () => Promise<void>;\n  init: () => Promise<void>;\n  initSync?: () => void;\n  version?: string;\n\n  // HNSW Index\n  WasmHnswIndex: new (dim: number, m?: number, efConstruction?: number) => HnswIndexInstance;\n\n  // Identity/Crypto\n  WasmIdentity: {\n    generate: () => IdentityInstance;\n    fromSecretKey: (key: Uint8Array) => IdentityInstance;\n  };\n\n  // Crypto utilities\n  WasmCrypto?: {\n    hash: (data: Uint8Array) => Uint8Array;\n    encrypt: (key: Uint8Array, data: Uint8Array) => Uint8Array;\n    decrypt: (key: Uint8Array, ciphertext: Uint8Array) => Uint8Array;\n  };\n\n  // Post-quantum crypto\n  WasmHybridKeyPair?: {\n    generate: () => { publicKey: Uint8Array; secretKey: Uint8Array };\n    encrypt: (publicKey: Uint8Array, data: Uint8Array) => Uint8Array;\n    decrypt: (secretKey: Uint8Array, ciphertext: Uint8Array) => Uint8Array;\n  };\n\n  // Semantic matching\n  WasmSemanticMatcher: new () => SemanticMatcherInstance;\n\n  // Additional classes\n  WasmAdaptiveCompressor?: new () => unknown;\n  WasmQuantizer?: new () => unknown;\n  WasmRaftNode?: new () => unknown;\n  WasmSpikingNetwork?: new () => unknown;\n\n  // Legacy aliases\n  HnswIndex?: new (dim: number, m?: number, efConstruction?: number) => HnswIndexInstance;\n  Identity?: { generate: () => IdentityInstance; fromSecretKey: (key: Uint8Array) => IdentityInstance };\n  SemanticMatcher?: new () => SemanticMatcherInstance;\n  isReady?: () => boolean;\n}\n\ninterface HnswIndexInstance {\n  add: (vector: Float32Array) => number;\n  search: (query: Float32Array, k: number) => Array<{ index: number; distance: number }>;\n  len: () => number;\n  serialize: () => Uint8Array;\n  deserialize: (data: Uint8Array) => void;\n}\n\ninterface IdentityInstance {\n  publicKey: () => Uint8Array;\n  secretKey: () => Uint8Array;\n  sign: (data: Uint8Array) => Uint8Array;\n  verify: (data: Uint8Array, signature: Uint8Array) => boolean;\n}\n\ninterface SemanticMatcherInstance {\n  registerAgent: (id: string, embedding: Float32Array, capabilities: string[]) => void;\n  matchTask: (embedding: Float32Array, topK: number) => Array<{ agentId: string; score: number; capabilities: string[] }>;\n}\n\n/**\n * Graph module - Cypher/SPARQL/SQL\n */\ninterface GraphModule {\n  default: () => Promise<void>;\n  init: () => Promise<void>;\n  initSync?: () => void;\n  GraphDB: new () => GraphDBInstance;\n  isReady?: () => boolean;\n}\n\ninterface GraphDBInstance {\n  // Cypher queries\n  cypher: (query: string) => Promise<any>;\n\n  // SPARQL queries\n  sparql: (query: string) => Promise<any>;\n\n  // SQL queries\n  sql: (query: string) => Promise<any>;\n\n  // Node/Edge operations\n  createNode: (labels: string[], properties: Record<string, any>) => string;\n  createEdge: (from: string, to: string, type: string, properties?: Record<string, any>) => string;\n  getNode: (id: string) => any;\n  deleteNode: (id: string) => boolean;\n\n  // Vector search on graph\n  vectorSearch: (embedding: Float32Array, k: number) => Array<{ nodeId: string; distance: number }>;\n\n  // Serialization\n  export: () => Uint8Array;\n  import: (data: Uint8Array) => void;\n}\n\n/**\n * RvLite module - Lightweight vector ops\n */\ninterface RvLiteModule {\n  default: () => Promise<void>;\n  init: () => Promise<void>;\n  initSync?: () => void;\n\n  // Vector operations\n  cosineSimilarity?: (a: Float32Array, b: Float32Array) => number;\n  dotProduct?: (a: Float32Array, b: Float32Array) => number;\n  euclideanDistance?: (a: Float32Array, b: Float32Array) => number;\n  normalize?: (v: Float32Array) => Float32Array;\n\n  // Batch operations\n  batchCosineSimilarity?: (queries: Float32Array[], corpus: Float32Array[]) => number[][];\n\n  // SIMD status\n  isSIMDEnabled?: () => boolean;\n  isReady?: () => boolean;\n}\n\n/**\n * SONA module - Self-learning\n */\ninterface SonaModule {\n  default: () => Promise<void>;\n  init: () => Promise<void>;\n  initSync?: () => void;\n  SonaEngine?: new (config?: SonaConfig) => SonaEngineInstance;\n  isReady?: () => boolean;\n}\n\ninterface SonaConfig {\n  embeddingDim?: number;\n  hiddenDim?: number;\n  microLoraRank?: number;\n  baseLoraRank?: number;\n  ewcLambda?: number;\n  learningRate?: number;\n}\n\ninterface SonaEngineInstance {\n  // Routing\n  route: (taskEmbedding: Float32Array) => { agentId: string; confidence: number };\n\n  // Learning\n  learn: (taskEmbedding: Float32Array, agentId: string, reward: number) => void;\n\n  // Pattern management\n  addPattern: (pattern: { task: string; agent: string; success: boolean }) => void;\n  findPatterns: (query: Float32Array, k: number) => Array<{ task: string; agent: string; similarity: number }>;\n\n  // State\n  getStats: () => { patterns: number; trajectories: number; avgReward: number };\n  serialize: () => Uint8Array;\n  deserialize: (data: Uint8Array) => void;\n}\n\n/**\n * DAG module - Workflow orchestration\n */\ninterface DagModule {\n  default: () => Promise<void>;\n  init: () => Promise<void>;\n  initSync?: () => void;\n  DagWorkflow?: new () => DagWorkflowInstance;\n  isReady?: () => boolean;\n}\n\ninterface DagWorkflowInstance {\n  // Node management\n  addNode: (id: string, handler: (input: any) => Promise<any>) => void;\n  addEdge: (from: string, to: string) => void;\n\n  // Execution\n  execute: (input: any) => Promise<any>;\n  executeParallel: (inputs: any[]) => Promise<any[]>;\n\n  // State\n  getTopologicalOrder: () => string[];\n  validate: () => { valid: boolean; errors: string[] };\n}\n\n/**\n * ONNX module - Embeddings\n */\ninterface OnnxModule {\n  default: () => Promise<void>;\n  init: () => Promise<void>;\n  initSync?: () => void;\n\n  // Embedding generation\n  embed?: (text: string) => Promise<Float32Array>;\n  embedBatch?: (texts: string[]) => Promise<Float32Array[]>;\n\n  // Model management\n  loadModel?: (modelData?: Uint8Array) => Promise<void>;\n  isModelLoaded?: () => boolean;\n  getModelInfo?: () => { name: string; dimension: number };\n\n  // Similarity\n  similarity?: (text1: string, text2: string) => Promise<number>;\n  isReady?: () => boolean;\n}\n\n// ============================================================================\n// Initialization\n// ============================================================================\n\n/**\n * Initialize EdgeFull WASM module\n */\nexport async function initEdgeFull(): Promise<boolean> {\n  if (initialized) return edgeFullModule !== null;\n  if (initPromise) return initPromise;\n\n  initPromise = (async () => {\n    try {\n      // Import individual modules to avoid main module ONNX export bug\n      const [edgeMod, graphMod, rvliteMod, sonaMod, dagMod] = await Promise.all([\n        import('@ruvector/edge-full/edge').catch(() => null),\n        import('@ruvector/edge-full/graph').catch(() => null),\n        import('@ruvector/edge-full/rvlite').catch(() => null),\n        import('@ruvector/edge-full/sona').catch(() => null),\n        import('@ruvector/edge-full/dag').catch(() => null),\n      ]);\n\n      // Also try ONNX separately (may fail on some platforms)\n      let onnxMod = null;\n      try {\n        onnxMod = await import('@ruvector/edge-full/onnx');\n      } catch {\n        logger.debug('ONNX module not available');\n      }\n\n      // Construct module interface\n      edgeFullModule = {\n        edge: edgeMod as unknown as EdgeModule,\n        graph: graphMod as unknown as GraphModule,\n        rvlite: rvliteMod as unknown as RvLiteModule,\n        sona: sonaMod as unknown as SonaModule,\n        dag: dagMod as unknown as DagModule,\n        onnx: onnxMod as unknown as OnnxModule,\n        isReady: () => true,\n        getVersion: () => '0.1.0',\n      };\n\n      // Initialize sub-modules in parallel\n      const initPromises: Promise<void>[] = [];\n\n      if (edgeFullModule.edge?.default) {\n        initPromises.push(edgeFullModule.edge.default());\n      }\n      if (edgeFullModule.graph?.default) {\n        initPromises.push(edgeFullModule.graph.default());\n      }\n      if (edgeFullModule.rvlite?.default) {\n        initPromises.push(edgeFullModule.rvlite.default());\n      }\n      if (edgeFullModule.sona?.default) {\n        initPromises.push(edgeFullModule.sona.default());\n      }\n      if (edgeFullModule.dag?.default) {\n        initPromises.push(edgeFullModule.dag.default());\n      }\n      if (edgeFullModule.onnx?.default) {\n        initPromises.push(edgeFullModule.onnx.default());\n      }\n\n      await Promise.all(initPromises);\n\n      initialized = true;\n\n      logger.info('EdgeFull WASM initialized', {\n        version: edgeFullModule.getVersion?.() || '0.1.0',\n        modules: ['edge', 'graph', 'rvlite', 'sona', 'dag', 'onnx'],\n        simd: edgeFullModule.rvlite?.isSIMDEnabled?.() ?? false,\n      });\n\n      return true;\n    } catch (error) {\n      logger.debug('EdgeFull WASM not available, using fallbacks', { error });\n      initialized = true;\n      return false;\n    }\n  })();\n\n  return initPromise;\n}\n\n/**\n * Check if EdgeFull is available\n */\nexport function isEdgeFullAvailable(): boolean {\n  return edgeFullModule !== null && (edgeFullModule.isReady?.() ?? false);\n}\n\n/**\n * Get EdgeFull module (initialize if needed)\n */\nexport async function getEdgeFull(): Promise<EdgeFullModule | null> {\n  if (!initialized) {\n    await initEdgeFull();\n  }\n  return edgeFullModule;\n}\n\n// ============================================================================\n// High-Level API Wrappers\n// ============================================================================\n\n/**\n * EdgeFull HNSW Index with JS fallback\n */\nexport class EdgeFullHnswIndex {\n  private wasmIndex: HnswIndexInstance | null = null;\n  private jsVectors: Float32Array[] = [];\n  private dimensions: number;\n\n  constructor(dimensions: number, m: number = 16, efConstruction: number = 200) {\n    this.dimensions = dimensions;\n\n    if (edgeFullModule?.edge?.HnswIndex) {\n      try {\n        this.wasmIndex = new edgeFullModule.edge.HnswIndex(dimensions, m, efConstruction);\n      } catch (error) {\n        logger.debug('Failed to create WASM HNSW, using JS fallback', { error });\n      }\n    }\n  }\n\n  add(vector: Float32Array | number[]): number {\n    const vec = vector instanceof Float32Array ? vector : new Float32Array(vector);\n\n    if (this.wasmIndex) {\n      try {\n        return this.wasmIndex.add(vec);\n      } catch {\n        // Fall through\n      }\n    }\n\n    const idx = this.jsVectors.length;\n    this.jsVectors.push(vec);\n    return idx;\n  }\n\n  search(query: Float32Array | number[], k: number = 10): Array<{ index: number; distance: number }> {\n    const vec = query instanceof Float32Array ? query : new Float32Array(query);\n\n    if (this.wasmIndex) {\n      try {\n        return this.wasmIndex.search(vec, k);\n      } catch {\n        // Fall through\n      }\n    }\n\n    // JS fallback - brute force\n    const distances = this.jsVectors.map((v, idx) => ({\n      index: idx,\n      distance: this.euclideanDistance(vec, v),\n    }));\n\n    return distances.sort((a, b) => a.distance - b.distance).slice(0, k);\n  }\n\n  size(): number {\n    if (this.wasmIndex) {\n      try {\n        return this.wasmIndex.len();\n      } catch {\n        // Fall through\n      }\n    }\n    return this.jsVectors.length;\n  }\n\n  isWasmAccelerated(): boolean {\n    return this.wasmIndex !== null;\n  }\n\n  private euclideanDistance(a: Float32Array, b: Float32Array): number {\n    let sum = 0;\n    for (let i = 0; i < a.length; i++) {\n      const diff = a[i] - b[i];\n      sum += diff * diff;\n    }\n    return Math.sqrt(sum);\n  }\n}\n\n/**\n * EdgeFull Graph Database with Cypher support\n */\nexport class EdgeFullGraphDB {\n  private wasmGraph: GraphDBInstance | null = null;\n  private jsNodes: Map<string, { labels: string[]; properties: Record<string, any> }> = new Map();\n  private jsEdges: Map<string, { from: string; to: string; type: string; properties: Record<string, any> }> = new Map();\n  private nodeCounter = 0;\n  private edgeCounter = 0;\n\n  constructor() {\n    if (edgeFullModule?.graph?.GraphDB) {\n      try {\n        this.wasmGraph = new edgeFullModule.graph.GraphDB();\n      } catch (error) {\n        logger.debug('Failed to create WASM GraphDB, using JS fallback', { error });\n      }\n    }\n  }\n\n  async cypher(query: string): Promise<any> {\n    if (this.wasmGraph) {\n      try {\n        return await this.wasmGraph.cypher(query);\n      } catch {\n        // Fall through\n      }\n    }\n    throw new Error('Cypher queries require WASM GraphDB');\n  }\n\n  createNode(labels: string[], properties: Record<string, any> = {}): string {\n    if (this.wasmGraph) {\n      try {\n        return this.wasmGraph.createNode(labels, properties);\n      } catch {\n        // Fall through\n      }\n    }\n\n    const id = `node_${++this.nodeCounter}`;\n    this.jsNodes.set(id, { labels, properties });\n    return id;\n  }\n\n  createEdge(from: string, to: string, type: string, properties: Record<string, any> = {}): string {\n    if (this.wasmGraph) {\n      try {\n        return this.wasmGraph.createEdge(from, to, type, properties);\n      } catch {\n        // Fall through\n      }\n    }\n\n    const id = `edge_${++this.edgeCounter}`;\n    this.jsEdges.set(id, { from, to, type, properties });\n    return id;\n  }\n\n  getNode(id: string): any {\n    if (this.wasmGraph) {\n      try {\n        return this.wasmGraph.getNode(id);\n      } catch {\n        // Fall through\n      }\n    }\n    return this.jsNodes.get(id) || null;\n  }\n\n  isWasmAccelerated(): boolean {\n    return this.wasmGraph !== null;\n  }\n}\n\n/**\n * EdgeFull SONA Engine with JS fallback\n */\nexport class EdgeFullSonaEngine {\n  private wasmSona: SonaEngineInstance | null = null;\n  private jsPatterns: Array<{ task: string; agent: string; embedding?: Float32Array; success: boolean; reward: number }> = [];\n  private agentScores: Map<string, { total: number; count: number }> = new Map();\n\n  constructor(config?: SonaConfig) {\n    if (edgeFullModule?.sona?.SonaEngine) {\n      try {\n        this.wasmSona = new edgeFullModule.sona.SonaEngine(config);\n      } catch (error) {\n        logger.debug('Failed to create WASM SONA, using JS fallback', { error });\n      }\n    }\n  }\n\n  route(taskEmbedding: Float32Array): { agentId: string; confidence: number } {\n    if (this.wasmSona) {\n      try {\n        return this.wasmSona.route(taskEmbedding);\n      } catch {\n        // Fall through\n      }\n    }\n\n    // JS fallback: select best performing agent\n    let bestAgent = 'general';\n    let bestScore = 0;\n\n    for (const [agent, stats] of this.agentScores) {\n      const avgScore = stats.total / stats.count;\n      if (avgScore > bestScore) {\n        bestScore = avgScore;\n        bestAgent = agent;\n      }\n    }\n\n    return { agentId: bestAgent, confidence: Math.min(0.9, bestScore) };\n  }\n\n  learn(taskEmbedding: Float32Array, agentId: string, reward: number): void {\n    if (this.wasmSona) {\n      try {\n        this.wasmSona.learn(taskEmbedding, agentId, reward);\n        return;\n      } catch {\n        // Fall through\n      }\n    }\n\n    // JS fallback\n    const stats = this.agentScores.get(agentId) || { total: 0, count: 0 };\n    stats.total += reward;\n    stats.count += 1;\n    this.agentScores.set(agentId, stats);\n  }\n\n  addPattern(pattern: { task: string; agent: string; success: boolean }): void {\n    if (this.wasmSona) {\n      try {\n        this.wasmSona.addPattern(pattern);\n        return;\n      } catch {\n        // Fall through\n      }\n    }\n\n    this.jsPatterns.push({ ...pattern, reward: pattern.success ? 1 : -1 });\n  }\n\n  getStats(): { patterns: number; trajectories: number; avgReward: number } {\n    if (this.wasmSona) {\n      try {\n        return this.wasmSona.getStats();\n      } catch {\n        // Fall through\n      }\n    }\n\n    let totalReward = 0;\n    for (const stats of this.agentScores.values()) {\n      totalReward += stats.total;\n    }\n    const count = Array.from(this.agentScores.values()).reduce((a, b) => a + b.count, 0);\n\n    return {\n      patterns: this.jsPatterns.length,\n      trajectories: count,\n      avgReward: count > 0 ? totalReward / count : 0,\n    };\n  }\n\n  isWasmAccelerated(): boolean {\n    return this.wasmSona !== null;\n  }\n}\n\n/**\n * EdgeFull ONNX Embeddings\n */\nexport class EdgeFullOnnxEmbeddings {\n  private initialized = false;\n\n  async init(): Promise<boolean> {\n    if (!edgeFullModule?.onnx) {\n      await initEdgeFull();\n    }\n    this.initialized = edgeFullModule?.onnx?.isReady?.() ?? false;\n    return this.initialized;\n  }\n\n  async embed(text: string): Promise<Float32Array> {\n    if (!this.initialized) await this.init();\n\n    if (edgeFullModule?.onnx?.embed) {\n      try {\n        return await edgeFullModule.onnx.embed(text);\n      } catch {\n        // Fall through\n      }\n    }\n\n    // Fallback to simple embedding\n    return this.simpleEmbed(text);\n  }\n\n  async embedBatch(texts: string[]): Promise<Float32Array[]> {\n    if (!this.initialized) await this.init();\n\n    if (edgeFullModule?.onnx?.embedBatch) {\n      try {\n        return await edgeFullModule.onnx.embedBatch(texts);\n      } catch {\n        // Fall through\n      }\n    }\n\n    return texts.map((t) => this.simpleEmbed(t));\n  }\n\n  async similarity(text1: string, text2: string): Promise<number> {\n    if (edgeFullModule?.onnx?.similarity) {\n      try {\n        return await edgeFullModule.onnx.similarity(text1, text2);\n      } catch {\n        // Fall through\n      }\n    }\n\n    const [e1, e2] = await Promise.all([this.embed(text1), this.embed(text2)]);\n    return this.cosineSimilarity(e1, e2);\n  }\n\n  isAvailable(): boolean {\n    return edgeFullModule?.onnx?.isReady?.() ?? false;\n  }\n\n  private simpleEmbed(text: string, dim: number = 384): Float32Array {\n    const embedding = new Float32Array(dim);\n    for (let i = 0; i < text.length; i++) {\n      const code = text.charCodeAt(i);\n      embedding[i % dim] += code / 255;\n      embedding[(i * 7) % dim] += (code * 0.3) / 255;\n    }\n    let norm = 0;\n    for (let i = 0; i < dim; i++) norm += embedding[i] * embedding[i];\n    norm = Math.sqrt(norm) || 1;\n    for (let i = 0; i < dim; i++) embedding[i] /= norm;\n    return embedding;\n  }\n\n  private cosineSimilarity(a: Float32Array, b: Float32Array): number {\n    let dot = 0, normA = 0, normB = 0;\n    for (let i = 0; i < a.length; i++) {\n      dot += a[i] * b[i];\n      normA += a[i] * a[i];\n      normB += b[i] * b[i];\n    }\n    return dot / (Math.sqrt(normA) * Math.sqrt(normB) || 1);\n  }\n}\n\n/**\n * EdgeFull DAG Workflow\n */\nexport class EdgeFullDagWorkflow {\n  private wasmDag: DagWorkflowInstance | null = null;\n  private nodes: Map<string, (input: any) => Promise<any>> = new Map();\n  private edges: Array<{ from: string; to: string }> = [];\n\n  constructor() {\n    if (edgeFullModule?.dag?.DagWorkflow) {\n      try {\n        this.wasmDag = new edgeFullModule.dag.DagWorkflow();\n      } catch (error) {\n        logger.debug('Failed to create WASM DAG, using JS fallback', { error });\n      }\n    }\n  }\n\n  addNode(id: string, handler: (input: any) => Promise<any>): void {\n    if (this.wasmDag) {\n      try {\n        this.wasmDag.addNode(id, handler);\n        return;\n      } catch {\n        // Fall through\n      }\n    }\n    this.nodes.set(id, handler);\n  }\n\n  addEdge(from: string, to: string): void {\n    if (this.wasmDag) {\n      try {\n        this.wasmDag.addEdge(from, to);\n        return;\n      } catch {\n        // Fall through\n      }\n    }\n    this.edges.push({ from, to });\n  }\n\n  async execute(input: any): Promise<any> {\n    if (this.wasmDag) {\n      try {\n        return await this.wasmDag.execute(input);\n      } catch {\n        // Fall through\n      }\n    }\n\n    // Simple JS execution (topological order)\n    const order = this.getTopologicalOrder();\n    let result = input;\n    for (const nodeId of order) {\n      const handler = this.nodes.get(nodeId);\n      if (handler) {\n        result = await handler(result);\n      }\n    }\n    return result;\n  }\n\n  getTopologicalOrder(): string[] {\n    if (this.wasmDag) {\n      try {\n        return this.wasmDag.getTopologicalOrder();\n      } catch {\n        // Fall through\n      }\n    }\n\n    // Simple topological sort\n    const visited = new Set<string>();\n    const order: string[] = [];\n\n    const visit = (node: string) => {\n      if (visited.has(node)) return;\n      visited.add(node);\n      for (const edge of this.edges) {\n        if (edge.from === node) {\n          visit(edge.to);\n        }\n      }\n      order.unshift(node);\n    };\n\n    for (const node of this.nodes.keys()) {\n      visit(node);\n    }\n\n    return order;\n  }\n\n  isWasmAccelerated(): boolean {\n    return this.wasmDag !== null;\n  }\n}\n\n// ============================================================================\n// RvLite Vector Operations\n// ============================================================================\n\n/**\n * Cosine similarity (SIMD-accelerated when available)\n */\nexport function cosineSimilarity(a: Float32Array, b: Float32Array): number {\n  if (edgeFullModule?.rvlite?.cosineSimilarity) {\n    try {\n      return edgeFullModule.rvlite.cosineSimilarity(a, b);\n    } catch {\n      // Fall through\n    }\n  }\n\n  let dot = 0, normA = 0, normB = 0;\n  for (let i = 0; i < a.length; i++) {\n    dot += a[i] * b[i];\n    normA += a[i] * a[i];\n    normB += b[i] * b[i];\n  }\n  return dot / (Math.sqrt(normA) * Math.sqrt(normB) || 1);\n}\n\n/**\n * Dot product (SIMD-accelerated when available)\n */\nexport function dotProduct(a: Float32Array, b: Float32Array): number {\n  if (edgeFullModule?.rvlite?.dotProduct) {\n    try {\n      return edgeFullModule.rvlite.dotProduct(a, b);\n    } catch {\n      // Fall through\n    }\n  }\n\n  let dot = 0;\n  for (let i = 0; i < a.length; i++) {\n    dot += a[i] * b[i];\n  }\n  return dot;\n}\n\n/**\n * Normalize vector (SIMD-accelerated when available)\n */\nexport function normalize(v: Float32Array): Float32Array {\n  if (edgeFullModule?.rvlite?.normalize) {\n    try {\n      return edgeFullModule.rvlite.normalize(v);\n    } catch {\n      // Fall through\n    }\n  }\n\n  const result = new Float32Array(v.length);\n  let norm = 0;\n  for (let i = 0; i < v.length; i++) {\n    norm += v[i] * v[i];\n  }\n  norm = Math.sqrt(norm) || 1;\n  for (let i = 0; i < v.length; i++) {\n    result[i] = v[i] / norm;\n  }\n  return result;\n}\n\n/**\n * Check if SIMD is enabled\n */\nexport function isSIMDEnabled(): boolean {\n  return edgeFullModule?.rvlite?.isSIMDEnabled?.() ?? false;\n}\n\n// ============================================================================\n// Statistics\n// ============================================================================\n\nexport interface EdgeFullStats {\n  available: boolean;\n  version: string;\n  modules: {\n    edge: boolean;\n    graph: boolean;\n    rvlite: boolean;\n    sona: boolean;\n    dag: boolean;\n    onnx: boolean;\n  };\n  simdEnabled: boolean;\n}\n\n/**\n * Get EdgeFull statistics\n */\nexport function getEdgeFullStats(): EdgeFullStats {\n  return {\n    available: isEdgeFullAvailable(),\n    version: edgeFullModule?.getVersion?.() || '0.0.0',\n    modules: {\n      edge: edgeFullModule?.edge?.isReady?.() ?? false,\n      graph: edgeFullModule?.graph?.isReady?.() ?? false,\n      rvlite: edgeFullModule?.rvlite?.isReady?.() ?? false,\n      sona: edgeFullModule?.sona?.isReady?.() ?? false,\n      dag: edgeFullModule?.dag?.isReady?.() ?? false,\n      onnx: edgeFullModule?.onnx?.isReady?.() ?? false,\n    },\n    simdEnabled: isSIMDEnabled(),\n  };\n}\n\n// ============================================================================\n// Exports\n// ============================================================================\n\nexport default {\n  // Initialization\n  initEdgeFull,\n  isEdgeFullAvailable,\n  getEdgeFull,\n  getEdgeFullStats,\n\n  // Classes\n  EdgeFullHnswIndex,\n  EdgeFullGraphDB,\n  EdgeFullSonaEngine,\n  EdgeFullOnnxEmbeddings,\n  EdgeFullDagWorkflow,\n\n  // Vector operations\n  cosineSimilarity,\n  dotProduct,\n  normalize,\n  isSIMDEnabled,\n};\n"]}