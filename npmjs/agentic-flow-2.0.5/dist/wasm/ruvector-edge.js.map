{"version":3,"file":"ruvector-edge.js","sourceRoot":"","sources":["../../src/wasm/ruvector-edge.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * RuVector Edge WASM Integration\n *\n * Provides WASM-accelerated primitives for:\n * - Ed25519 identity generation (P2P Swarm)\n * - HNSW vector indexing (150x faster search)\n * - Semantic task matching (agent routing)\n *\n * Falls back to pure JS implementations when WASM unavailable.\n */\n\nimport { logger } from '../utils/logger.js';\n\n// WASM module state\nlet wasmInitialized = false;\nlet wasmModule: any = null;\nlet WasmIdentity: any = null;\nlet WasmHnswIndex: any = null;\nlet WasmSemanticMatcher: any = null;\n\n/**\n * Check if WASM is supported in current environment\n */\nexport function isWasmSupported(): boolean {\n  try {\n    if (typeof WebAssembly === 'object' &&\n        typeof WebAssembly.instantiate === 'function') {\n      // Test with minimal WASM module\n      const module = new WebAssembly.Module(\n        new Uint8Array([0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00])\n      );\n      return module instanceof WebAssembly.Module;\n    }\n  } catch {\n    // WASM not supported\n  }\n  return false;\n}\n\n/**\n * Initialize RuVector Edge WASM module\n */\nexport async function initRuVectorWasm(): Promise<boolean> {\n  if (wasmInitialized) return true;\n\n  if (!isWasmSupported()) {\n    logger.debug('WASM not supported, using JS fallbacks');\n    return false;\n  }\n\n  try {\n    // Dynamic import of @ruvector/edge-full/edge (replaces @ruvector/edge)\n    const ruvectorEdge = await import('@ruvector/edge-full/edge');\n\n    // Initialize WASM\n    if (ruvectorEdge.default) {\n      await ruvectorEdge.default();\n    }\n\n    // Export WASM classes\n    WasmIdentity = ruvectorEdge.WasmIdentity;\n    WasmHnswIndex = ruvectorEdge.WasmHnswIndex;\n    WasmSemanticMatcher = ruvectorEdge.WasmSemanticMatcher;\n    wasmModule = ruvectorEdge;\n    wasmInitialized = true;\n\n    logger.info('RuVector Edge WASM initialized', {\n      features: ['WasmIdentity', 'WasmHnswIndex', 'WasmSemanticMatcher'],\n    });\n\n    return true;\n  } catch (error) {\n    logger.debug('Failed to initialize RuVector WASM', { error });\n    return false;\n  }\n}\n\n/**\n * Check if WASM module is initialized\n */\nexport function isWasmInitialized(): boolean {\n  return wasmInitialized;\n}\n\n//=============================================================================\n// WASM Identity - Ed25519 Key Generation\n//=============================================================================\n\nexport interface WasmIdentityKeys {\n  publicKey: Uint8Array;\n  secretKey: Uint8Array;\n  publicKeyHex: string;\n}\n\n/**\n * Generate Ed25519 identity using WASM (or fallback to Node crypto)\n */\nexport async function generateIdentity(): Promise<WasmIdentityKeys> {\n  if (wasmInitialized && WasmIdentity) {\n    try {\n      const identity = WasmIdentity.generate();\n      return {\n        publicKey: identity.public_key(),\n        secretKey: identity.secret_key(),\n        publicKeyHex: Buffer.from(identity.public_key()).toString('hex'),\n      };\n    } catch (error) {\n      logger.warn('WASM identity generation failed, using fallback', { error });\n    }\n  }\n\n  // Fallback to Node.js crypto\n  const crypto = await import('crypto');\n  const { publicKey, privateKey } = crypto.generateKeyPairSync('ed25519');\n\n  const pubKeyDer = publicKey.export({ type: 'spki', format: 'der' });\n  const privKeyDer = privateKey.export({ type: 'pkcs8', format: 'der' });\n\n  // Extract raw keys from DER format (last 32 bytes for ed25519)\n  const pubKeyRaw = pubKeyDer.slice(-32);\n  const privKeyRaw = privKeyDer.slice(-32);\n\n  return {\n    publicKey: new Uint8Array(pubKeyRaw),\n    secretKey: new Uint8Array(privKeyRaw),\n    publicKeyHex: pubKeyRaw.toString('hex'),\n  };\n}\n\n/**\n * Sign data using WASM identity (or fallback)\n */\nexport async function signData(\n  data: Uint8Array,\n  secretKey: Uint8Array\n): Promise<Uint8Array> {\n  if (wasmInitialized && WasmIdentity) {\n    try {\n      const identity = WasmIdentity.from_secret_key(secretKey);\n      return identity.sign(data);\n    } catch (error) {\n      logger.warn('WASM signing failed, using fallback', { error });\n    }\n  }\n\n  // Fallback to Node.js crypto\n  const crypto = await import('crypto');\n  const privateKey = crypto.createPrivateKey({\n    key: Buffer.concat([\n      // PKCS8 header for ed25519\n      Buffer.from('302e020100300506032b657004220420', 'hex'),\n      Buffer.from(secretKey),\n    ]),\n    format: 'der',\n    type: 'pkcs8',\n  });\n\n  const signature = crypto.sign(null, Buffer.from(data), privateKey);\n  return new Uint8Array(signature);\n}\n\n/**\n * Verify signature using WASM (or fallback)\n */\nexport async function verifySignature(\n  data: Uint8Array,\n  signature: Uint8Array,\n  publicKey: Uint8Array\n): Promise<boolean> {\n  if (wasmInitialized && WasmIdentity) {\n    try {\n      return WasmIdentity.verify(publicKey, data, signature);\n    } catch (error) {\n      logger.warn('WASM verification failed, using fallback', { error });\n    }\n  }\n\n  // Fallback to Node.js crypto\n  const crypto = await import('crypto');\n  const pubKey = crypto.createPublicKey({\n    key: Buffer.concat([\n      // SPKI header for ed25519\n      Buffer.from('302a300506032b6570032100', 'hex'),\n      Buffer.from(publicKey),\n    ]),\n    format: 'der',\n    type: 'spki',\n  });\n\n  return crypto.verify(null, Buffer.from(data), pubKey, Buffer.from(signature));\n}\n\n//=============================================================================\n// WASM HNSW Index - Fast Vector Search\n//=============================================================================\n\nexport interface HnswSearchResult {\n  index: number;\n  distance: number;\n}\n\n/**\n * HNSW Index wrapper with WASM acceleration\n */\nexport class RuVectorHnswIndex {\n  private wasmIndex: any = null;\n  private jsVectors: Float32Array[] = [];\n  private dimensions: number;\n  private m: number;\n  private efConstruction: number;\n\n  constructor(dimensions: number, m: number = 16, efConstruction: number = 200) {\n    this.dimensions = dimensions;\n    this.m = m;\n    this.efConstruction = efConstruction;\n\n    if (wasmInitialized && WasmHnswIndex) {\n      try {\n        this.wasmIndex = new WasmHnswIndex(dimensions, m, efConstruction);\n        logger.debug('Created WASM HNSW index', { dimensions, m, efConstruction });\n      } catch (error) {\n        logger.warn('Failed to create WASM HNSW index', { error });\n      }\n    }\n  }\n\n  /**\n   * Add vector to index\n   */\n  add(vector: Float32Array | number[]): number {\n    const vec = vector instanceof Float32Array ? vector : new Float32Array(vector);\n\n    if (this.wasmIndex) {\n      try {\n        return this.wasmIndex.add(vec);\n      } catch (error) {\n        logger.warn('WASM add failed, using JS fallback', { error });\n      }\n    }\n\n    // JS fallback - simple linear storage\n    const idx = this.jsVectors.length;\n    this.jsVectors.push(vec);\n    return idx;\n  }\n\n  /**\n   * Search for k nearest neighbors\n   */\n  search(query: Float32Array | number[], k: number = 10): HnswSearchResult[] {\n    const vec = query instanceof Float32Array ? query : new Float32Array(query);\n\n    if (this.wasmIndex) {\n      try {\n        const results = this.wasmIndex.search(vec, k);\n        return results.map((r: any) => ({\n          index: r.index,\n          distance: r.distance,\n        }));\n      } catch (error) {\n        logger.warn('WASM search failed, using JS fallback', { error });\n      }\n    }\n\n    // JS fallback - brute force search\n    const distances: HnswSearchResult[] = this.jsVectors.map((v, idx) => ({\n      index: idx,\n      distance: this.euclideanDistance(vec, v),\n    }));\n\n    return distances.sort((a, b) => a.distance - b.distance).slice(0, k);\n  }\n\n  /**\n   * Get index size\n   */\n  size(): number {\n    if (this.wasmIndex) {\n      try {\n        return this.wasmIndex.len();\n      } catch {\n        // Fall through\n      }\n    }\n    return this.jsVectors.length;\n  }\n\n  /**\n   * Check if using WASM acceleration\n   */\n  isWasmAccelerated(): boolean {\n    return this.wasmIndex !== null;\n  }\n\n  private euclideanDistance(a: Float32Array, b: Float32Array): number {\n    let sum = 0;\n    for (let i = 0; i < a.length; i++) {\n      const diff = a[i] - b[i];\n      sum += diff * diff;\n    }\n    return Math.sqrt(sum);\n  }\n}\n\n//=============================================================================\n// WASM Semantic Matcher - Agent Routing\n//=============================================================================\n\nexport interface SemanticMatch {\n  agent: string;\n  score: number;\n  capabilities: string[];\n}\n\n/**\n * Semantic matcher for intelligent agent routing\n */\nexport class RuVectorSemanticMatcher {\n  private wasmMatcher: any = null;\n  private jsAgents: Map<string, { embedding: Float32Array; capabilities: string[] }> = new Map();\n\n  constructor() {\n    if (wasmInitialized && WasmSemanticMatcher) {\n      try {\n        this.wasmMatcher = new WasmSemanticMatcher();\n        logger.debug('Created WASM semantic matcher');\n      } catch (error) {\n        logger.warn('Failed to create WASM semantic matcher', { error });\n      }\n    }\n  }\n\n  /**\n   * Register agent with capabilities\n   */\n  registerAgent(agentId: string, embedding: Float32Array | number[], capabilities: string[]): void {\n    const vec = embedding instanceof Float32Array ? embedding : new Float32Array(embedding);\n\n    if (this.wasmMatcher) {\n      try {\n        this.wasmMatcher.register_agent(agentId, vec, capabilities);\n        return;\n      } catch (error) {\n        logger.warn('WASM register failed, using JS fallback', { error });\n      }\n    }\n\n    // JS fallback\n    this.jsAgents.set(agentId, { embedding: vec, capabilities });\n  }\n\n  /**\n   * Find best matching agents for task\n   */\n  matchTask(taskEmbedding: Float32Array | number[], topK: number = 5): SemanticMatch[] {\n    const vec = taskEmbedding instanceof Float32Array ? taskEmbedding : new Float32Array(taskEmbedding);\n\n    if (this.wasmMatcher) {\n      try {\n        const matches = this.wasmMatcher.match_task(vec, topK);\n        return matches.map((m: any) => ({\n          agent: m.agent_id,\n          score: m.score,\n          capabilities: m.capabilities,\n        }));\n      } catch (error) {\n        logger.warn('WASM match failed, using JS fallback', { error });\n      }\n    }\n\n    // JS fallback - cosine similarity\n    const scores: SemanticMatch[] = [];\n    for (const [agentId, data] of this.jsAgents) {\n      const score = this.cosineSimilarity(vec, data.embedding);\n      scores.push({\n        agent: agentId,\n        score,\n        capabilities: data.capabilities,\n      });\n    }\n\n    return scores.sort((a, b) => b.score - a.score).slice(0, topK);\n  }\n\n  /**\n   * Check if using WASM acceleration\n   */\n  isWasmAccelerated(): boolean {\n    return this.wasmMatcher !== null;\n  }\n\n  private cosineSimilarity(a: Float32Array, b: Float32Array): number {\n    let dotProduct = 0;\n    let normA = 0;\n    let normB = 0;\n\n    for (let i = 0; i < a.length; i++) {\n      dotProduct += a[i] * b[i];\n      normA += a[i] * a[i];\n      normB += b[i] * b[i];\n    }\n\n    const denominator = Math.sqrt(normA) * Math.sqrt(normB);\n    return denominator === 0 ? 0 : dotProduct / denominator;\n  }\n}\n\n//=============================================================================\n// Auto-initialization\n//=============================================================================\n\n// Try to initialize on module load (non-blocking)\nif (typeof process !== 'undefined' && process.env?.AGENTIC_FLOW_WASM !== 'false') {\n  initRuVectorWasm().catch(() => {\n    // Silent fail - will use JS fallbacks\n  });\n}\n\nexport default {\n  isWasmSupported,\n  initRuVectorWasm,\n  isWasmInitialized,\n  generateIdentity,\n  signData,\n  verifySignature,\n  RuVectorHnswIndex,\n  RuVectorSemanticMatcher,\n};\n"]}