{"version":3,"sources":["../../../node_modules/ruvector/dist/types.js","../../../node_modules/ruvector/dist/core/gnn-wrapper.js","../../../node_modules/ruvector/dist/core/attention-fallbacks.js","../../../node_modules/ruvector/dist/core/agentdb-fast.js","../../../node_modules/ruvector/dist/core/sona-wrapper.js","../../../node_modules/ruvector/dist/core/index.js","../../../node_modules/ruvector/dist/services/embedding-service.js","../../../node_modules/ruvector/dist/services/index.js","../../../node_modules/ruvector/package.json","../../../node_modules/ruvector/dist/index.js","../src/pure/types.ts","../src/pure/scores.ts","../src/pure/conformal.ts","../src/factory.ts","../src/enhanced-pattern-engine.ts"],"names":["exports","RuvectorLayer","TensorCompress"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\n/**\n * GNN Wrapper - Safe wrapper around @ruvector/gnn with automatic array conversion\n *\n * This wrapper handles the array type conversion automatically, allowing users\n * to pass either regular arrays or Float32Arrays.\n *\n * The native @ruvector/gnn requires Float32Array for maximum performance.\n * This wrapper converts any input type to Float32Array automatically.\n *\n * Performance Tips:\n * - Pass Float32Array directly for zero-copy performance\n * - Use toFloat32Array/toFloat32ArrayBatch for pre-conversion\n * - Avoid repeated conversions in hot paths\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TensorCompress = exports.RuvectorLayer = void 0;\nexports.toFloat32Array = toFloat32Array;\nexports.toFloat32ArrayBatch = toFloat32ArrayBatch;\nexports.differentiableSearch = differentiableSearch;\nexports.hierarchicalForward = hierarchicalForward;\nexports.getCompressionLevel = getCompressionLevel;\nexports.isGnnAvailable = isGnnAvailable;\n// Lazy load to avoid import errors if not installed\nlet gnnModule = null;\nlet loadError = null;\nfunction getGnnModule() {\n    if (gnnModule)\n        return gnnModule;\n    if (loadError)\n        throw loadError;\n    try {\n        gnnModule = require('@ruvector/gnn');\n        return gnnModule;\n    }\n    catch (e) {\n        loadError = new Error(`@ruvector/gnn is not installed or failed to load: ${e.message}\\n` +\n            `Install with: npm install @ruvector/gnn`);\n        throw loadError;\n    }\n}\n/**\n * Convert any array-like input to Float32Array (native requires Float32Array)\n * Optimized paths:\n * - Float32Array: zero-copy return\n * - Float64Array: efficient typed array copy\n * - Array: direct Float32Array construction\n */\nfunction toFloat32Array(input) {\n    if (input instanceof Float32Array)\n        return input;\n    if (input instanceof Float64Array)\n        return new Float32Array(input);\n    if (Array.isArray(input))\n        return new Float32Array(input);\n    return new Float32Array(Array.from(input));\n}\n/**\n * Convert array of arrays to array of Float32Arrays\n */\nfunction toFloat32ArrayBatch(input) {\n    const result = new Array(input.length);\n    for (let i = 0; i < input.length; i++) {\n        result[i] = toFloat32Array(input[i]);\n    }\n    return result;\n}\n/**\n * Differentiable search using soft attention mechanism\n *\n * This wrapper automatically converts Float32Array inputs to regular arrays.\n *\n * @param query - Query vector (array or Float32Array)\n * @param candidates - List of candidate vectors (arrays or Float32Arrays)\n * @param k - Number of top results to return\n * @param temperature - Temperature for softmax (lower = sharper, higher = smoother)\n * @returns Search result with indices and soft weights\n *\n * @example\n * ```typescript\n * import { differentiableSearch } from 'ruvector/core/gnn-wrapper';\n *\n * // Works with regular arrays (auto-converted to Float32Array)\n * const result1 = differentiableSearch([1, 0, 0], [[1, 0, 0], [0, 1, 0]], 2, 1.0);\n *\n * // For best performance, use Float32Array directly (zero-copy)\n * const query = new Float32Array([1, 0, 0]);\n * const candidates = [new Float32Array([1, 0, 0]), new Float32Array([0, 1, 0])];\n * const result2 = differentiableSearch(query, candidates, 2, 1.0);\n * ```\n */\nfunction differentiableSearch(query, candidates, k, temperature = 1.0) {\n    const gnn = getGnnModule();\n    // Convert to Float32Array (native Rust expects Float32Array for performance)\n    const queryFloat32 = toFloat32Array(query);\n    const candidatesFloat32 = toFloat32ArrayBatch(candidates);\n    return gnn.differentiableSearch(queryFloat32, candidatesFloat32, k, temperature);\n}\n/**\n * GNN Layer for HNSW topology\n */\nclass RuvectorLayer {\n    /**\n     * Create a new Ruvector GNN layer\n     *\n     * @param inputDim - Dimension of input node embeddings\n     * @param hiddenDim - Dimension of hidden representations\n     * @param heads - Number of attention heads\n     * @param dropout - Dropout rate (0.0 to 1.0)\n     */\n    constructor(inputDim, hiddenDim, heads, dropout = 0.1) {\n        const gnn = getGnnModule();\n        this.inner = new gnn.RuvectorLayer(inputDim, hiddenDim, heads, dropout);\n    }\n    /**\n     * Forward pass through the GNN layer\n     *\n     * @param nodeEmbedding - Current node's embedding\n     * @param neighborEmbeddings - Embeddings of neighbor nodes\n     * @param edgeWeights - Weights of edges to neighbors\n     * @returns Updated node embedding as Float32Array\n     */\n    forward(nodeEmbedding, neighborEmbeddings, edgeWeights) {\n        return this.inner.forward(toFloat32Array(nodeEmbedding), toFloat32ArrayBatch(neighborEmbeddings), toFloat32Array(edgeWeights));\n    }\n    /**\n     * Serialize the layer to JSON\n     */\n    toJson() {\n        return this.inner.toJson();\n    }\n    /**\n     * Deserialize the layer from JSON\n     */\n    static fromJson(json) {\n        const gnn = getGnnModule();\n        const layer = new RuvectorLayer(1, 1, 1, 0); // Dummy constructor\n        layer.inner = gnn.RuvectorLayer.fromJson(json);\n        return layer;\n    }\n}\nexports.RuvectorLayer = RuvectorLayer;\n/**\n * Tensor compressor with adaptive level selection\n */\nclass TensorCompress {\n    constructor() {\n        const gnn = getGnnModule();\n        this.inner = new gnn.TensorCompress();\n    }\n    /**\n     * Compress an embedding based on access frequency\n     *\n     * @param embedding - Input embedding vector\n     * @param accessFreq - Access frequency (0.0 to 1.0)\n     * @returns Compressed tensor as JSON string\n     */\n    compress(embedding, accessFreq) {\n        return this.inner.compress(toFloat32Array(embedding), accessFreq);\n    }\n    /**\n     * Decompress a compressed tensor\n     *\n     * @param compressedJson - Compressed tensor JSON\n     * @returns Decompressed embedding\n     */\n    decompress(compressedJson) {\n        return this.inner.decompress(compressedJson);\n    }\n}\nexports.TensorCompress = TensorCompress;\n/**\n * Hierarchical forward pass through GNN layers\n *\n * @param query - Query vector\n * @param layerEmbeddings - Embeddings organized by layer\n * @param gnnLayersJson - JSON array of serialized GNN layers\n * @returns Final embedding after hierarchical processing as Float32Array\n */\nfunction hierarchicalForward(query, layerEmbeddings, gnnLayersJson) {\n    const gnn = getGnnModule();\n    return gnn.hierarchicalForward(toFloat32Array(query), layerEmbeddings.map(layer => toFloat32ArrayBatch(layer)), gnnLayersJson);\n}\n/**\n * Get compression level for a given access frequency\n */\nfunction getCompressionLevel(accessFreq) {\n    const gnn = getGnnModule();\n    return gnn.getCompressionLevel(accessFreq);\n}\n/**\n * Check if GNN module is available\n */\nfunction isGnnAvailable() {\n    try {\n        getGnnModule();\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexports.default = {\n    differentiableSearch,\n    RuvectorLayer,\n    TensorCompress,\n    hierarchicalForward,\n    getCompressionLevel,\n    isGnnAvailable,\n    // Export conversion helpers for performance optimization\n    toFloat32Array,\n    toFloat32ArrayBatch,\n};\n","\"use strict\";\n/**\n * Attention Fallbacks - Safe wrapper around @ruvector/attention with automatic array conversion\n *\n * This wrapper handles the array type conversion automatically, allowing users\n * to pass either regular arrays or Float32Arrays.\n *\n * @ruvector/attention requires Float32Array inputs.\n * This wrapper handles the conversion automatically.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MoEAttention = exports.LocalGlobalAttention = exports.LinearAttention = exports.HyperbolicAttention = exports.FlashAttention = exports.MultiHeadAttention = void 0;\nexports.projectToPoincareBall = projectToPoincareBall;\nexports.poincareDistance = poincareDistance;\nexports.mobiusAddition = mobiusAddition;\nexports.expMap = expMap;\nexports.logMap = logMap;\nexports.isAttentionAvailable = isAttentionAvailable;\nexports.getAttentionVersion = getAttentionVersion;\n// Lazy load to avoid import errors if not installed\nlet attentionModule = null;\nlet loadError = null;\nfunction getAttentionModule() {\n    if (attentionModule)\n        return attentionModule;\n    if (loadError)\n        throw loadError;\n    try {\n        attentionModule = require('@ruvector/attention');\n        return attentionModule;\n    }\n    catch (e) {\n        loadError = new Error(`@ruvector/attention is not installed or failed to load: ${e.message}\\n` +\n            `Install with: npm install @ruvector/attention`);\n        throw loadError;\n    }\n}\n/**\n * Convert any array-like input to Float32Array\n */\nfunction toFloat32Array(input) {\n    if (input instanceof Float32Array) {\n        return input;\n    }\n    return new Float32Array(input);\n}\n/**\n * Convert nested arrays to Float32Arrays\n */\nfunction toFloat32Arrays(inputs) {\n    return inputs.map(arr => toFloat32Array(arr));\n}\n/**\n * Convert Float32Array result back to regular array if needed\n */\nfunction fromFloat32Array(input) {\n    return Array.from(input);\n}\n/**\n * Multi-head attention mechanism\n *\n * This wrapper automatically converts array inputs to Float32Array.\n */\nclass MultiHeadAttention {\n    /**\n     * Create a new multi-head attention instance\n     *\n     * @param dim - Embedding dimension (must be divisible by numHeads)\n     * @param numHeads - Number of attention heads\n     */\n    constructor(dim, numHeads) {\n        const attention = getAttentionModule();\n        this.inner = new attention.MultiHeadAttention(dim, numHeads);\n        this.dim = dim;\n        this.numHeads = numHeads;\n    }\n    /**\n     * Compute multi-head attention\n     *\n     * @param query - Query vector\n     * @param keys - Array of key vectors\n     * @param values - Array of value vectors\n     * @returns Attention output\n     *\n     * @example\n     * ```typescript\n     * const mha = new MultiHeadAttention(64, 4);\n     *\n     * // Works with regular arrays\n     * const result1 = mha.compute([...64 values], [[...64], [...64]], [[...64], [...64]]);\n     *\n     * // Also works with Float32Array\n     * const q = new Float32Array(64);\n     * const k = [new Float32Array(64)];\n     * const v = [new Float32Array(64)];\n     * const result2 = mha.compute(q, k, v);\n     * ```\n     */\n    compute(query, keys, values) {\n        const raw = this.inner.compute(toFloat32Array(query), toFloat32Arrays(keys), toFloat32Arrays(values));\n        return {\n            values: fromFloat32Array(raw),\n            raw\n        };\n    }\n    /**\n     * Compute and return raw Float32Array (faster, no conversion)\n     */\n    computeRaw(query, keys, values) {\n        return this.inner.compute(query, keys, values);\n    }\n    get headDim() {\n        return this.dim / this.numHeads;\n    }\n}\nexports.MultiHeadAttention = MultiHeadAttention;\n/**\n * Flash attention with tiled computation\n */\nclass FlashAttention {\n    /**\n     * Create a new flash attention instance\n     *\n     * @param dim - Embedding dimension\n     * @param blockSize - Block size for tiled computation (default: 512)\n     */\n    constructor(dim, blockSize = 512) {\n        const attention = getAttentionModule();\n        this.inner = new attention.FlashAttention(dim, blockSize);\n        this.dim = dim;\n        this.blockSize = blockSize;\n    }\n    /**\n     * Compute flash attention\n     */\n    compute(query, keys, values) {\n        const raw = this.inner.compute(toFloat32Array(query), toFloat32Arrays(keys), toFloat32Arrays(values));\n        return {\n            values: fromFloat32Array(raw),\n            raw\n        };\n    }\n    computeRaw(query, keys, values) {\n        return this.inner.compute(query, keys, values);\n    }\n}\nexports.FlashAttention = FlashAttention;\n/**\n * Hyperbolic attention in Poincare ball model\n */\nclass HyperbolicAttention {\n    /**\n     * Create a new hyperbolic attention instance\n     *\n     * @param dim - Embedding dimension\n     * @param curvature - Hyperbolic curvature (typically 1.0)\n     */\n    constructor(dim, curvature = 1.0) {\n        const attention = getAttentionModule();\n        this.inner = new attention.HyperbolicAttention(dim, curvature);\n        this.dim = dim;\n        this.curvature = curvature;\n    }\n    /**\n     * Compute hyperbolic attention\n     */\n    compute(query, keys, values) {\n        const raw = this.inner.compute(toFloat32Array(query), toFloat32Arrays(keys), toFloat32Arrays(values));\n        return {\n            values: fromFloat32Array(raw),\n            raw\n        };\n    }\n    computeRaw(query, keys, values) {\n        return this.inner.compute(query, keys, values);\n    }\n}\nexports.HyperbolicAttention = HyperbolicAttention;\n/**\n * Linear attention (Performer-style) with O(n) complexity\n */\nclass LinearAttention {\n    /**\n     * Create a new linear attention instance\n     *\n     * @param dim - Embedding dimension\n     * @param numFeatures - Number of random features\n     */\n    constructor(dim, numFeatures) {\n        const attention = getAttentionModule();\n        this.inner = new attention.LinearAttention(dim, numFeatures);\n        this.dim = dim;\n        this.numFeatures = numFeatures;\n    }\n    /**\n     * Compute linear attention\n     */\n    compute(query, keys, values) {\n        const raw = this.inner.compute(toFloat32Array(query), toFloat32Arrays(keys), toFloat32Arrays(values));\n        return {\n            values: fromFloat32Array(raw),\n            raw\n        };\n    }\n    computeRaw(query, keys, values) {\n        return this.inner.compute(query, keys, values);\n    }\n}\nexports.LinearAttention = LinearAttention;\n/**\n * Local-global attention (Longformer-style)\n */\nclass LocalGlobalAttention {\n    /**\n     * Create a new local-global attention instance\n     *\n     * @param dim - Embedding dimension\n     * @param localWindow - Size of local attention window\n     * @param globalTokens - Number of global attention tokens\n     */\n    constructor(dim, localWindow, globalTokens) {\n        const attention = getAttentionModule();\n        this.inner = new attention.LocalGlobalAttention(dim, localWindow, globalTokens);\n        this.dim = dim;\n        this.localWindow = localWindow;\n        this.globalTokens = globalTokens;\n    }\n    /**\n     * Compute local-global attention\n     */\n    compute(query, keys, values) {\n        const raw = this.inner.compute(toFloat32Array(query), toFloat32Arrays(keys), toFloat32Arrays(values));\n        return {\n            values: fromFloat32Array(raw),\n            raw\n        };\n    }\n    computeRaw(query, keys, values) {\n        return this.inner.compute(query, keys, values);\n    }\n}\nexports.LocalGlobalAttention = LocalGlobalAttention;\n/**\n * Mixture of Experts attention\n */\nclass MoEAttention {\n    /**\n     * Create a new MoE attention instance\n     *\n     * @param config - MoE configuration\n     */\n    constructor(config) {\n        const attention = getAttentionModule();\n        this.inner = new attention.MoEAttention({\n            dim: config.dim,\n            num_experts: config.numExperts,\n            top_k: config.topK,\n            expert_capacity: config.expertCapacity ?? 1.25,\n        });\n        this.config = config;\n    }\n    /**\n     * Create with simple parameters\n     */\n    static simple(dim, numExperts, topK) {\n        return new MoEAttention({ dim, numExperts, topK });\n    }\n    /**\n     * Compute MoE attention\n     */\n    compute(query, keys, values) {\n        const raw = this.inner.compute(toFloat32Array(query), toFloat32Arrays(keys), toFloat32Arrays(values));\n        return {\n            values: fromFloat32Array(raw),\n            raw\n        };\n    }\n    computeRaw(query, keys, values) {\n        return this.inner.compute(query, keys, values);\n    }\n}\nexports.MoEAttention = MoEAttention;\n// Hyperbolic math utilities\n/**\n * Project a vector into the Poincare ball\n */\nfunction projectToPoincareBall(vector, curvature = 1.0) {\n    const attention = getAttentionModule();\n    const result = attention.projectToPoincareBall(toFloat32Array(vector), curvature);\n    return fromFloat32Array(result);\n}\n/**\n * Compute hyperbolic (Poincare) distance between two points\n */\nfunction poincareDistance(a, b, curvature = 1.0) {\n    const attention = getAttentionModule();\n    return attention.poincareDistance(toFloat32Array(a), toFloat32Array(b), curvature);\n}\n/**\n * Mobius addition in hyperbolic space\n */\nfunction mobiusAddition(a, b, curvature = 1.0) {\n    const attention = getAttentionModule();\n    const result = attention.mobiusAddition(toFloat32Array(a), toFloat32Array(b), curvature);\n    return fromFloat32Array(result);\n}\n/**\n * Exponential map from tangent space to hyperbolic space\n */\nfunction expMap(base, tangent, curvature = 1.0) {\n    const attention = getAttentionModule();\n    const result = attention.expMap(toFloat32Array(base), toFloat32Array(tangent), curvature);\n    return fromFloat32Array(result);\n}\n/**\n * Logarithmic map from hyperbolic space to tangent space\n */\nfunction logMap(base, point, curvature = 1.0) {\n    const attention = getAttentionModule();\n    const result = attention.logMap(toFloat32Array(base), toFloat32Array(point), curvature);\n    return fromFloat32Array(result);\n}\n/**\n * Check if attention module is available\n */\nfunction isAttentionAvailable() {\n    try {\n        getAttentionModule();\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n/**\n * Get attention module version\n */\nfunction getAttentionVersion() {\n    try {\n        const attention = getAttentionModule();\n        return attention.version?.() ?? null;\n    }\n    catch {\n        return null;\n    }\n}\nexports.default = {\n    MultiHeadAttention,\n    FlashAttention,\n    HyperbolicAttention,\n    LinearAttention,\n    LocalGlobalAttention,\n    MoEAttention,\n    projectToPoincareBall,\n    poincareDistance,\n    mobiusAddition,\n    expMap,\n    logMap,\n    isAttentionAvailable,\n    getAttentionVersion,\n};\n","\"use strict\";\n/**\n * AgentDB Fast - High-performance in-process alternative to AgentDB CLI\n *\n * The AgentDB CLI has ~2.3s startup overhead due to npx initialization.\n * This module provides 50-200x faster operations by using in-process calls.\n *\n * Features:\n * - In-memory episode storage with LRU eviction\n * - Vector similarity search using @ruvector/core\n * - Compatible API with AgentDB's episode/trajectory interfaces\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FastAgentDB = void 0;\nexports.createFastAgentDB = createFastAgentDB;\nexports.getDefaultAgentDB = getDefaultAgentDB;\n// Lazy load ruvector core\nlet coreModule = null;\nfunction getCoreModule() {\n    if (coreModule)\n        return coreModule;\n    try {\n        coreModule = require('@ruvector/core');\n        return coreModule;\n    }\n    catch {\n        // Fallback to ruvector if core not available\n        try {\n            coreModule = require('ruvector');\n            return coreModule;\n        }\n        catch (e) {\n            throw new Error(`Neither @ruvector/core nor ruvector is available: ${e.message}`);\n        }\n    }\n}\n/**\n * Fast in-memory AgentDB implementation\n */\nclass FastAgentDB {\n    /**\n     * Create a new FastAgentDB instance\n     *\n     * @param dimensions - Vector dimensions for state embeddings\n     * @param maxEpisodes - Maximum episodes to store (LRU eviction)\n     */\n    constructor(dimensions = 128, maxEpisodes = 100000) {\n        this.episodes = new Map();\n        this.trajectories = new Map();\n        this.vectorDb = null;\n        this.episodeOrder = []; // For LRU eviction\n        this.dimensions = dimensions;\n        this.maxEpisodes = maxEpisodes;\n    }\n    /**\n     * Initialize the vector database\n     */\n    async initVectorDb() {\n        if (this.vectorDb)\n            return;\n        try {\n            const core = getCoreModule();\n            this.vectorDb = new core.VectorDB({\n                dimensions: this.dimensions,\n                distanceMetric: 'Cosine',\n            });\n        }\n        catch (e) {\n            // Vector DB not available, use fallback similarity\n            console.warn(`VectorDB not available, using fallback similarity: ${e.message}`);\n        }\n    }\n    /**\n     * Store an episode\n     *\n     * @param episode - Episode to store\n     * @returns Episode ID\n     */\n    async storeEpisode(episode) {\n        await this.initVectorDb();\n        const id = episode.id ?? this.generateId();\n        const fullEpisode = {\n            ...episode,\n            id,\n            timestamp: episode.timestamp ?? Date.now(),\n        };\n        // LRU eviction if needed\n        if (this.episodes.size >= this.maxEpisodes) {\n            const oldestId = this.episodeOrder.shift();\n            if (oldestId) {\n                this.episodes.delete(oldestId);\n            }\n        }\n        this.episodes.set(id, fullEpisode);\n        this.episodeOrder.push(id);\n        // Index in vector DB if available\n        if (this.vectorDb && fullEpisode.state.length === this.dimensions) {\n            try {\n                await this.vectorDb.insert({\n                    id,\n                    vector: new Float32Array(fullEpisode.state),\n                });\n            }\n            catch {\n                // Ignore indexing errors\n            }\n        }\n        return id;\n    }\n    /**\n     * Store multiple episodes in batch\n     */\n    async storeEpisodes(episodes) {\n        const ids = [];\n        for (const episode of episodes) {\n            const id = await this.storeEpisode(episode);\n            ids.push(id);\n        }\n        return ids;\n    }\n    /**\n     * Retrieve an episode by ID\n     */\n    async getEpisode(id) {\n        const episode = this.episodes.get(id);\n        if (episode) {\n            // Update LRU order\n            const idx = this.episodeOrder.indexOf(id);\n            if (idx > -1) {\n                this.episodeOrder.splice(idx, 1);\n                this.episodeOrder.push(id);\n            }\n        }\n        return episode ?? null;\n    }\n    /**\n     * Search for similar episodes by state\n     *\n     * @param queryState - State vector to search for\n     * @param k - Number of results to return\n     * @returns Similar episodes sorted by similarity\n     */\n    async searchByState(queryState, k = 10) {\n        await this.initVectorDb();\n        const query = Array.isArray(queryState) ? queryState : Array.from(queryState);\n        // Use vector DB if available\n        if (this.vectorDb && query.length === this.dimensions) {\n            try {\n                const results = await this.vectorDb.search({\n                    vector: new Float32Array(query),\n                    k,\n                });\n                return results\n                    .map((r) => {\n                    const episode = this.episodes.get(r.id);\n                    if (!episode)\n                        return null;\n                    return {\n                        episode,\n                        similarity: 1 - r.score, // Convert distance to similarity\n                    };\n                })\n                    .filter((r) => r !== null);\n            }\n            catch {\n                // Fall through to fallback\n            }\n        }\n        // Fallback: brute-force cosine similarity\n        return this.fallbackSearch(query, k);\n    }\n    /**\n     * Fallback similarity search using brute-force cosine similarity\n     */\n    fallbackSearch(query, k) {\n        const results = [];\n        for (const episode of this.episodes.values()) {\n            if (episode.state.length !== query.length)\n                continue;\n            const similarity = this.cosineSimilarity(query, episode.state);\n            results.push({ episode, similarity });\n        }\n        return results\n            .sort((a, b) => b.similarity - a.similarity)\n            .slice(0, k);\n    }\n    /**\n     * Compute cosine similarity between two vectors\n     */\n    cosineSimilarity(a, b) {\n        let dotProduct = 0;\n        let normA = 0;\n        let normB = 0;\n        for (let i = 0; i < a.length; i++) {\n            dotProduct += a[i] * b[i];\n            normA += a[i] * a[i];\n            normB += b[i] * b[i];\n        }\n        const denom = Math.sqrt(normA) * Math.sqrt(normB);\n        return denom === 0 ? 0 : dotProduct / denom;\n    }\n    /**\n     * Store a trajectory (sequence of episodes)\n     */\n    async storeTrajectory(episodes, metadata) {\n        const trajectoryId = this.generateId();\n        const storedEpisodes = [];\n        let totalReward = 0;\n        for (const episode of episodes) {\n            const id = await this.storeEpisode(episode);\n            const stored = await this.getEpisode(id);\n            if (stored) {\n                storedEpisodes.push(stored);\n                totalReward += stored.reward;\n            }\n        }\n        const trajectory = {\n            id: trajectoryId,\n            episodes: storedEpisodes,\n            totalReward,\n            metadata,\n        };\n        this.trajectories.set(trajectoryId, trajectory);\n        return trajectoryId;\n    }\n    /**\n     * Get a trajectory by ID\n     */\n    async getTrajectory(id) {\n        return this.trajectories.get(id) ?? null;\n    }\n    /**\n     * Get top trajectories by total reward\n     */\n    async getTopTrajectories(k = 10) {\n        return Array.from(this.trajectories.values())\n            .sort((a, b) => b.totalReward - a.totalReward)\n            .slice(0, k);\n    }\n    /**\n     * Sample random episodes (for experience replay)\n     */\n    async sampleEpisodes(n) {\n        const allEpisodes = Array.from(this.episodes.values());\n        const sampled = [];\n        for (let i = 0; i < Math.min(n, allEpisodes.length); i++) {\n            const idx = Math.floor(Math.random() * allEpisodes.length);\n            sampled.push(allEpisodes[idx]);\n        }\n        return sampled;\n    }\n    /**\n     * Get database statistics\n     */\n    getStats() {\n        return {\n            episodeCount: this.episodes.size,\n            trajectoryCount: this.trajectories.size,\n            dimensions: this.dimensions,\n            maxEpisodes: this.maxEpisodes,\n            vectorDbAvailable: this.vectorDb !== null,\n        };\n    }\n    /**\n     * Clear all data\n     */\n    clear() {\n        this.episodes.clear();\n        this.trajectories.clear();\n        this.episodeOrder = [];\n    }\n    /**\n     * Generate a unique ID\n     */\n    generateId() {\n        return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n}\nexports.FastAgentDB = FastAgentDB;\n/**\n * Create a fast AgentDB instance\n */\nfunction createFastAgentDB(dimensions = 128, maxEpisodes = 100000) {\n    return new FastAgentDB(dimensions, maxEpisodes);\n}\n// Singleton instance for convenience\nlet defaultInstance = null;\n/**\n * Get the default FastAgentDB instance\n */\nfunction getDefaultAgentDB() {\n    if (!defaultInstance) {\n        defaultInstance = new FastAgentDB();\n    }\n    return defaultInstance;\n}\nexports.default = {\n    FastAgentDB,\n    createFastAgentDB,\n    getDefaultAgentDB,\n};\n","\"use strict\";\n/**\n * SONA Wrapper - Self-Optimizing Neural Architecture\n *\n * Provides a safe, flexible interface to @ruvector/sona with:\n * - Automatic array type conversion (Array <-> Float64Array)\n * - Graceful handling when sona is not installed\n * - TypeScript types for all APIs\n *\n * SONA Features:\n * - Micro-LoRA: Ultra-fast rank-1/2 adaptations (~0.1ms)\n * - Base-LoRA: Deeper adaptations for complex patterns\n * - EWC++: Elastic Weight Consolidation to prevent catastrophic forgetting\n * - ReasoningBank: Pattern storage and retrieval\n * - Trajectory tracking: Record and learn from execution paths\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sona = exports.SonaEngine = void 0;\nexports.isSonaAvailable = isSonaAvailable;\n// ============================================================================\n// Helper Functions\n// ============================================================================\n/** Convert any array-like to regular Array (SONA expects number[]) */\nfunction toArray(input) {\n    if (Array.isArray(input))\n        return input;\n    return Array.from(input);\n}\n// ============================================================================\n// Lazy Loading\n// ============================================================================\nlet sonaModule = null;\nlet sonaLoadError = null;\nfunction getSonaModule() {\n    if (sonaModule)\n        return sonaModule;\n    if (sonaLoadError)\n        throw sonaLoadError;\n    try {\n        sonaModule = require('@ruvector/sona');\n        return sonaModule;\n    }\n    catch (e) {\n        sonaLoadError = new Error(`@ruvector/sona is not installed. Install it with:\\n` +\n            `  npm install @ruvector/sona\\n\\n` +\n            `Original error: ${e.message}`);\n        throw sonaLoadError;\n    }\n}\n/** Check if sona is available */\nfunction isSonaAvailable() {\n    try {\n        getSonaModule();\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\n// ============================================================================\n// SONA Engine Wrapper\n// ============================================================================\n/**\n * SONA Engine - Self-Optimizing Neural Architecture\n *\n * Provides runtime-adaptive learning with:\n * - Micro-LoRA for instant adaptations\n * - Base-LoRA for deeper learning\n * - EWC++ for preventing forgetting\n * - ReasoningBank for pattern storage\n *\n * @example\n * ```typescript\n * import { Sona } from 'ruvector';\n *\n * // Create engine with hidden dimension\n * const engine = new Sona.Engine(256);\n *\n * // Or with custom config\n * const engine = Sona.Engine.withConfig({\n *   hiddenDim: 256,\n *   microLoraRank: 2,\n *   patternClusters: 100\n * });\n *\n * // Record a trajectory\n * const trajId = engine.beginTrajectory([0.1, 0.2, ...]);\n * engine.addStep(trajId, activations, attentionWeights, 0.8);\n * engine.endTrajectory(trajId, 0.9);\n *\n * // Apply learned adaptations\n * const adapted = engine.applyMicroLora(input);\n * ```\n */\nclass SonaEngine {\n    /**\n     * Create a new SONA engine\n     * @param hiddenDim Hidden dimension size (e.g., 256, 512, 768)\n     */\n    constructor(hiddenDim) {\n        const mod = getSonaModule();\n        this._native = new mod.SonaEngine(hiddenDim);\n    }\n    /**\n     * Create engine with custom configuration\n     * @param config SONA configuration options\n     */\n    static withConfig(config) {\n        const mod = getSonaModule();\n        const engine = new SonaEngine(config.hiddenDim);\n        // Replace native with configured version\n        engine._native = mod.SonaEngine.withConfig(config);\n        return engine;\n    }\n    // -------------------------------------------------------------------------\n    // Trajectory Recording\n    // -------------------------------------------------------------------------\n    /**\n     * Begin recording a new trajectory\n     * @param queryEmbedding Initial query embedding\n     * @returns Trajectory ID for subsequent operations\n     */\n    beginTrajectory(queryEmbedding) {\n        return this._native.beginTrajectory(toArray(queryEmbedding));\n    }\n    /**\n     * Add a step to an active trajectory\n     * @param trajectoryId Trajectory ID from beginTrajectory\n     * @param activations Layer activations\n     * @param attentionWeights Attention weights\n     * @param reward Reward signal for this step (0.0 - 1.0)\n     */\n    addStep(trajectoryId, activations, attentionWeights, reward) {\n        this._native.addTrajectoryStep(trajectoryId, toArray(activations), toArray(attentionWeights), reward);\n    }\n    /**\n     * Alias for addStep for API compatibility\n     */\n    addTrajectoryStep(trajectoryId, activations, attentionWeights, reward) {\n        this.addStep(trajectoryId, activations, attentionWeights, reward);\n    }\n    /**\n     * Set the model route for a trajectory\n     * @param trajectoryId Trajectory ID\n     * @param route Model route identifier (e.g., \"gpt-4\", \"claude-3\")\n     */\n    setRoute(trajectoryId, route) {\n        this._native.setTrajectoryRoute(trajectoryId, route);\n    }\n    /**\n     * Add context to a trajectory\n     * @param trajectoryId Trajectory ID\n     * @param contextId Context identifier\n     */\n    addContext(trajectoryId, contextId) {\n        this._native.addTrajectoryContext(trajectoryId, contextId);\n    }\n    /**\n     * Complete a trajectory and submit for learning\n     * @param trajectoryId Trajectory ID\n     * @param quality Final quality score (0.0 - 1.0)\n     */\n    endTrajectory(trajectoryId, quality) {\n        this._native.endTrajectory(trajectoryId, quality);\n    }\n    // -------------------------------------------------------------------------\n    // LoRA Transformations\n    // -------------------------------------------------------------------------\n    /**\n     * Apply micro-LoRA transformation (ultra-fast, ~0.1ms)\n     * @param input Input vector\n     * @returns Transformed output vector\n     */\n    applyMicroLora(input) {\n        return this._native.applyMicroLora(toArray(input));\n    }\n    /**\n     * Apply base-LoRA transformation to a specific layer\n     * @param layerIdx Layer index\n     * @param input Input vector\n     * @returns Transformed output vector\n     */\n    applyBaseLora(layerIdx, input) {\n        return this._native.applyBaseLora(layerIdx, toArray(input));\n    }\n    // -------------------------------------------------------------------------\n    // Learning Control\n    // -------------------------------------------------------------------------\n    /**\n     * Run background learning cycle if due\n     * Call this periodically (e.g., every few seconds)\n     * @returns Status message if learning occurred, null otherwise\n     */\n    tick() {\n        return this._native.tick();\n    }\n    /**\n     * Force immediate background learning cycle\n     * @returns Status message with learning results\n     */\n    forceLearn() {\n        return this._native.forceLearn();\n    }\n    /**\n     * Flush pending instant loop updates\n     */\n    flush() {\n        this._native.flush();\n    }\n    // -------------------------------------------------------------------------\n    // Pattern Retrieval\n    // -------------------------------------------------------------------------\n    /**\n     * Find similar learned patterns to a query\n     * @param queryEmbedding Query embedding\n     * @param k Number of patterns to return\n     * @returns Array of similar patterns\n     */\n    findPatterns(queryEmbedding, k) {\n        return this._native.findPatterns(toArray(queryEmbedding), k);\n    }\n    // -------------------------------------------------------------------------\n    // Engine Control\n    // -------------------------------------------------------------------------\n    /**\n     * Get engine statistics\n     * @returns Statistics object\n     */\n    getStats() {\n        const statsJson = this._native.getStats();\n        return JSON.parse(statsJson);\n    }\n    /**\n     * Enable or disable the engine\n     * @param enabled Whether to enable\n     */\n    setEnabled(enabled) {\n        this._native.setEnabled(enabled);\n    }\n    /**\n     * Check if engine is enabled\n     */\n    isEnabled() {\n        return this._native.isEnabled();\n    }\n}\nexports.SonaEngine = SonaEngine;\n// ============================================================================\n// Convenience Exports\n// ============================================================================\n/**\n * SONA namespace with all exports\n */\nexports.Sona = {\n    Engine: SonaEngine,\n    isAvailable: isSonaAvailable,\n};\nexports.default = exports.Sona;\n","\"use strict\";\n/**\n * Core module exports\n *\n * These wrappers provide safe, type-flexible interfaces to the underlying\n * native packages, handling array type conversions automatically.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sona = exports.agentdbFast = exports.attentionFallbacks = exports.gnnWrapper = void 0;\n__exportStar(require(\"./gnn-wrapper\"), exports);\n__exportStar(require(\"./attention-fallbacks\"), exports);\n__exportStar(require(\"./agentdb-fast\"), exports);\n__exportStar(require(\"./sona-wrapper\"), exports);\n// Re-export default objects for convenience\nvar gnn_wrapper_1 = require(\"./gnn-wrapper\");\nObject.defineProperty(exports, \"gnnWrapper\", { enumerable: true, get: function () { return __importDefault(gnn_wrapper_1).default; } });\nvar attention_fallbacks_1 = require(\"./attention-fallbacks\");\nObject.defineProperty(exports, \"attentionFallbacks\", { enumerable: true, get: function () { return __importDefault(attention_fallbacks_1).default; } });\nvar agentdb_fast_1 = require(\"./agentdb-fast\");\nObject.defineProperty(exports, \"agentdbFast\", { enumerable: true, get: function () { return __importDefault(agentdb_fast_1).default; } });\nvar sona_wrapper_1 = require(\"./sona-wrapper\");\nObject.defineProperty(exports, \"Sona\", { enumerable: true, get: function () { return __importDefault(sona_wrapper_1).default; } });\n","\"use strict\";\n/**\n * Embedding Service - Unified embedding generation and management\n *\n * This service provides a unified interface for generating, caching, and\n * managing embeddings from various sources (local models, APIs, etc.)\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EmbeddingService = exports.LocalNGramProvider = exports.MockEmbeddingProvider = void 0;\nexports.createEmbeddingService = createEmbeddingService;\nexports.getDefaultEmbeddingService = getDefaultEmbeddingService;\n/**\n * Simple hash function for cache keys\n */\nfunction hashText(text) {\n    let hash = 0;\n    for (let i = 0; i < text.length; i++) {\n        const char = text.charCodeAt(i);\n        hash = ((hash << 5) - hash) + char;\n        hash = hash & hash;\n    }\n    return `h${hash.toString(36)}`;\n}\n/**\n * Mock embedding provider for testing\n */\nclass MockEmbeddingProvider {\n    constructor(dimensions = 384) {\n        this.name = 'mock';\n        this.dimensions = dimensions;\n    }\n    async embed(texts) {\n        return texts.map(text => {\n            // Generate deterministic pseudo-random embeddings based on text\n            const embedding = [];\n            let seed = 0;\n            for (let i = 0; i < text.length; i++) {\n                seed = ((seed << 5) - seed + text.charCodeAt(i)) | 0;\n            }\n            for (let i = 0; i < this.dimensions; i++) {\n                seed = (seed * 1103515245 + 12345) | 0;\n                embedding.push((seed % 1000) / 1000 - 0.5);\n            }\n            // Normalize\n            const norm = Math.sqrt(embedding.reduce((s, v) => s + v * v, 0));\n            return embedding.map(v => v / (norm || 1));\n        });\n    }\n    getDimensions() {\n        return this.dimensions;\n    }\n}\nexports.MockEmbeddingProvider = MockEmbeddingProvider;\n/**\n * Simple local embedding using character n-grams\n * This is a fallback when no external provider is available\n */\nclass LocalNGramProvider {\n    constructor(dimensions = 256, ngramSize = 3) {\n        this.name = 'local-ngram';\n        this.dimensions = dimensions;\n        this.ngramSize = ngramSize;\n    }\n    async embed(texts) {\n        return texts.map(text => this.embedSingle(text));\n    }\n    embedSingle(text) {\n        const embedding = new Array(this.dimensions).fill(0);\n        const normalized = text.toLowerCase().replace(/[^a-z0-9]/g, ' ');\n        // Generate n-grams and hash them into embedding dimensions\n        for (let i = 0; i <= normalized.length - this.ngramSize; i++) {\n            const ngram = normalized.slice(i, i + this.ngramSize);\n            const hash = this.hashNgram(ngram);\n            const idx = Math.abs(hash) % this.dimensions;\n            embedding[idx] += hash > 0 ? 1 : -1;\n        }\n        // Normalize\n        const norm = Math.sqrt(embedding.reduce((s, v) => s + v * v, 0));\n        return embedding.map(v => v / (norm || 1));\n    }\n    hashNgram(ngram) {\n        let hash = 0;\n        for (let i = 0; i < ngram.length; i++) {\n            hash = ((hash << 5) - hash + ngram.charCodeAt(i)) | 0;\n        }\n        return hash;\n    }\n    getDimensions() {\n        return this.dimensions;\n    }\n}\nexports.LocalNGramProvider = LocalNGramProvider;\n/**\n * Embedding service with caching and batching\n */\nclass EmbeddingService {\n    constructor(config = {}) {\n        this.providers = new Map();\n        this.cache = new Map();\n        this.config = {\n            defaultProvider: config.defaultProvider ?? 'local-ngram',\n            maxCacheSize: config.maxCacheSize ?? 10000,\n            cacheTtl: config.cacheTtl ?? 3600000, // 1 hour\n            batchSize: config.batchSize ?? 32,\n        };\n        // Register default providers\n        this.registerProvider(new LocalNGramProvider());\n        this.registerProvider(new MockEmbeddingProvider());\n    }\n    /**\n     * Register an embedding provider\n     */\n    registerProvider(provider) {\n        this.providers.set(provider.name, provider);\n    }\n    /**\n     * Get a registered provider\n     */\n    getProvider(name) {\n        const providerName = name ?? this.config.defaultProvider;\n        const provider = this.providers.get(providerName);\n        if (!provider) {\n            throw new Error(`Provider not found: ${providerName}`);\n        }\n        return provider;\n    }\n    /**\n     * Generate embeddings for texts with caching\n     *\n     * @param texts - Texts to embed\n     * @param provider - Provider name (uses default if not specified)\n     * @returns Array of embeddings\n     */\n    async embed(texts, provider) {\n        const providerInstance = this.getProvider(provider);\n        const providerName = providerInstance.name;\n        const now = Date.now();\n        // Check cache and collect texts that need embedding\n        const results = new Array(texts.length).fill(null);\n        const uncachedIndices = [];\n        const uncachedTexts = [];\n        for (let i = 0; i < texts.length; i++) {\n            const cacheKey = `${providerName}:${hashText(texts[i])}`;\n            const cached = this.cache.get(cacheKey);\n            if (cached && now - cached.timestamp < this.config.cacheTtl) {\n                results[i] = cached.embedding;\n                cached.hits++;\n            }\n            else {\n                uncachedIndices.push(i);\n                uncachedTexts.push(texts[i]);\n            }\n        }\n        // Generate embeddings for uncached texts in batches\n        if (uncachedTexts.length > 0) {\n            const batches = [];\n            for (let i = 0; i < uncachedTexts.length; i += this.config.batchSize) {\n                batches.push(uncachedTexts.slice(i, i + this.config.batchSize));\n            }\n            let batchOffset = 0;\n            for (const batch of batches) {\n                const embeddings = await providerInstance.embed(batch);\n                for (let j = 0; j < embeddings.length; j++) {\n                    const originalIndex = uncachedIndices[batchOffset + j];\n                    results[originalIndex] = embeddings[j];\n                    // Cache the result\n                    const cacheKey = `${providerName}:${hashText(texts[originalIndex])}`;\n                    this.addToCache(cacheKey, embeddings[j], now);\n                }\n                batchOffset += batch.length;\n            }\n        }\n        return results;\n    }\n    /**\n     * Generate a single embedding\n     */\n    async embedOne(text, provider) {\n        const results = await this.embed([text], provider);\n        return results[0];\n    }\n    /**\n     * Add entry to cache with LRU eviction\n     */\n    addToCache(key, embedding, timestamp) {\n        // Evict old entries if cache is full\n        if (this.cache.size >= this.config.maxCacheSize) {\n            // Find and remove least recently used entry\n            let oldestKey = '';\n            let oldestTime = Infinity;\n            let lowestHits = Infinity;\n            for (const [k, v] of this.cache.entries()) {\n                if (v.hits < lowestHits || (v.hits === lowestHits && v.timestamp < oldestTime)) {\n                    oldestKey = k;\n                    oldestTime = v.timestamp;\n                    lowestHits = v.hits;\n                }\n            }\n            if (oldestKey) {\n                this.cache.delete(oldestKey);\n            }\n        }\n        this.cache.set(key, { embedding, timestamp, hits: 0 });\n    }\n    /**\n     * Compute cosine similarity between two embeddings\n     */\n    cosineSimilarity(a, b) {\n        if (a.length !== b.length) {\n            throw new Error('Embeddings must have same dimensions');\n        }\n        let dotProduct = 0;\n        let normA = 0;\n        let normB = 0;\n        for (let i = 0; i < a.length; i++) {\n            dotProduct += a[i] * b[i];\n            normA += a[i] * a[i];\n            normB += b[i] * b[i];\n        }\n        const denom = Math.sqrt(normA) * Math.sqrt(normB);\n        return denom === 0 ? 0 : dotProduct / denom;\n    }\n    /**\n     * Find most similar texts from a corpus\n     */\n    async findSimilar(query, corpus, k = 5, provider) {\n        const [queryEmbed, ...corpusEmbeds] = await this.embed([query, ...corpus], provider);\n        const results = corpusEmbeds.map((embed, i) => ({\n            text: corpus[i],\n            similarity: this.cosineSimilarity(queryEmbed, embed),\n            index: i,\n        }));\n        return results\n            .sort((a, b) => b.similarity - a.similarity)\n            .slice(0, k);\n    }\n    /**\n     * Get cache statistics\n     */\n    getCacheStats() {\n        let totalHits = 0;\n        for (const entry of this.cache.values()) {\n            totalHits += entry.hits;\n        }\n        return {\n            size: this.cache.size,\n            maxSize: this.config.maxCacheSize,\n            hitRate: this.cache.size > 0 ? totalHits / this.cache.size : 0,\n        };\n    }\n    /**\n     * Clear the cache\n     */\n    clearCache() {\n        this.cache.clear();\n    }\n    /**\n     * Get embedding dimensions for a provider\n     */\n    getDimensions(provider) {\n        return this.getProvider(provider).getDimensions();\n    }\n    /**\n     * List available providers\n     */\n    listProviders() {\n        return Array.from(this.providers.keys());\n    }\n}\nexports.EmbeddingService = EmbeddingService;\n/**\n * Create an embedding service instance\n */\nfunction createEmbeddingService(config) {\n    return new EmbeddingService(config);\n}\n// Singleton instance\nlet defaultService = null;\n/**\n * Get the default embedding service instance\n */\nfunction getDefaultEmbeddingService() {\n    if (!defaultService) {\n        defaultService = new EmbeddingService();\n    }\n    return defaultService;\n}\nexports.default = {\n    EmbeddingService,\n    LocalNGramProvider,\n    MockEmbeddingProvider,\n    createEmbeddingService,\n    getDefaultEmbeddingService,\n};\n","\"use strict\";\n/**\n * Services module exports\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embeddingService = void 0;\n__exportStar(require(\"./embedding-service\"), exports);\nvar embedding_service_1 = require(\"./embedding-service\");\nObject.defineProperty(exports, \"embeddingService\", { enumerable: true, get: function () { return __importDefault(embedding_service_1).default; } });\n","{\n  \"name\": \"ruvector\",\n  \"version\": \"0.1.34\",\n  \"description\": \"High-performance vector database for Node.js with automatic native/WASM fallback\",\n  \"main\": \"dist/index.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"bin\": {\n    \"ruvector\": \"./bin/cli.js\"\n  },\n  \"scripts\": {\n    \"build\": \"tsc\",\n    \"prepublishOnly\": \"npm run build\",\n    \"test\": \"node test/integration.js\"\n  },\n  \"keywords\": [\n    \"vector\",\n    \"database\",\n    \"vector-database\",\n    \"vector-search\",\n    \"similarity-search\",\n    \"semantic-search\",\n    \"embeddings\",\n    \"hnsw\",\n    \"ann\",\n    \"ai\",\n    \"machine-learning\",\n    \"rag\",\n    \"rust\",\n    \"wasm\",\n    \"native\",\n    \"ruv\",\n    \"ruvector\",\n    \"attention\",\n    \"transformer\",\n    \"flash-attention\",\n    \"hyperbolic\",\n    \"sona\",\n    \"lora\",\n    \"ewc\",\n    \"adaptive-learning\",\n    \"continual-learning\"\n  ],\n  \"author\": \"ruv.io Team <info@ruv.io> (https://ruv.io)\",\n  \"homepage\": \"https://ruv.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/ruvnet/ruvector/issues\"\n  },\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/ruvnet/ruvector.git\",\n    \"directory\": \"npm/packages/ruvector\"\n  },\n  \"dependencies\": {\n    \"@ruvector/core\": \"^0.1.25\",\n    \"@ruvector/attention\": \"^0.1.3\",\n    \"@ruvector/gnn\": \"^0.1.22\",\n    \"@ruvector/sona\": \"^0.1.4\",\n    \"chalk\": \"^4.1.2\",\n    \"commander\": \"^11.1.0\",\n    \"ora\": \"^5.4.1\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20.10.5\",\n    \"typescript\": \"^5.3.3\"\n  },\n  \"engines\": {\n    \"node\": \">=14.0.0\"\n  }\n}\n","\"use strict\";\n/**\n * ruvector - High-performance vector database for Node.js\n *\n * This package automatically detects and uses the best available implementation:\n * 1. Native (Rust-based, fastest) - if available for your platform\n * 2. WASM (WebAssembly, universal fallback) - works everywhere\n *\n * Also provides safe wrappers for GNN and Attention modules that handle\n * array type conversions automatically.\n */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VectorDB = exports.VectorDb = void 0;\nexports.getImplementationType = getImplementationType;\nexports.isNative = isNative;\nexports.isWasm = isWasm;\nexports.getVersion = getVersion;\n__exportStar(require(\"./types\"), exports);\n// Export core wrappers (safe interfaces with automatic type conversion)\n__exportStar(require(\"./core\"), exports);\n__exportStar(require(\"./services\"), exports);\nlet implementation;\nlet implementationType = 'wasm';\ntry {\n    // Try to load native module first\n    implementation = require('@ruvector/core');\n    implementationType = 'native';\n    // Verify it's actually working (native exports VectorDb, not VectorDB)\n    if (typeof implementation.VectorDb !== 'function') {\n        throw new Error('Native module loaded but VectorDb not found');\n    }\n}\ncatch (e) {\n    // No WASM fallback available yet\n    throw new Error(`Failed to load ruvector native module.\\n` +\n        `Error: ${e.message}\\n` +\n        `\\nSupported platforms:\\n` +\n        `- Linux x64/ARM64\\n` +\n        `- macOS Intel/Apple Silicon\\n` +\n        `- Windows x64\\n` +\n        `\\nIf you're on a supported platform, try:\\n` +\n        `  npm install --force @ruvector/core`);\n}\n/**\n * Get the current implementation type\n */\nfunction getImplementationType() {\n    return implementationType;\n}\n/**\n * Check if native implementation is being used\n */\nfunction isNative() {\n    return implementationType === 'native';\n}\n/**\n * Check if WASM implementation is being used\n */\nfunction isWasm() {\n    return implementationType === 'wasm';\n}\n/**\n * Get version information\n */\nfunction getVersion() {\n    const pkg = require('../package.json');\n    return {\n        version: pkg.version,\n        implementation: implementationType\n    };\n}\n// Export the VectorDb class (aliased as VectorDB for backwards compatibility)\nexports.VectorDb = implementation.VectorDb;\nexports.VectorDB = implementation.VectorDb;\n// Export everything from the implementation\nexports.default = implementation;\n","/**\n * Core types for conformal prediction\n */\n\nexport interface PredictionInterval {\n  /** Point prediction from base model */\n  point: number;\n\n  /** Lower bound of prediction interval */\n  lower: number;\n\n  /** Upper bound of prediction interval */\n  upper: number;\n\n  /** Miscoverage rate (1 - coverage) */\n  alpha: number;\n\n  /** Computed quantile threshold */\n  quantile: number;\n\n  /** Timestamp of prediction */\n  timestamp: number;\n\n  /** Width of the interval */\n  width(): number;\n\n  /** Check if value is in interval */\n  contains(value: number): boolean;\n\n  /** Relative width as percentage */\n  relativeWidth(): number;\n\n  /** Expected coverage (1 - alpha) */\n  coverage(): number;\n}\n\nexport class PredictionIntervalImpl implements PredictionInterval {\n  constructor(\n    public point: number,\n    public lower: number,\n    public upper: number,\n    public alpha: number,\n    public quantile: number,\n    public timestamp: number = Date.now()\n  ) {}\n\n  width(): number {\n    return this.upper - this.lower;\n  }\n\n  contains(value: number): boolean {\n    return value >= this.lower && value <= this.upper;\n  }\n\n  relativeWidth(): number {\n    if (Math.abs(this.point) < Number.EPSILON) {\n      return Infinity;\n    }\n    return (this.width() / Math.abs(this.point)) * 100;\n  }\n\n  coverage(): number {\n    return 1 - this.alpha;\n  }\n}\n\nexport interface PredictorConfig {\n  /** Miscoverage rate (e.g., 0.1 for 90% coverage) */\n  alpha: number;\n\n  /** Maximum calibration set size */\n  calibrationSize?: number;\n\n  /** Maximum interval width as percentage */\n  maxIntervalWidthPct?: number;\n\n  /** Recalibration frequency (number of predictions) */\n  recalibrationFreq?: number;\n}\n\nexport interface AdaptiveConfig {\n  /** Target coverage (e.g., 0.90 for 90%) */\n  targetCoverage: number;\n\n  /** Learning rate for PID control */\n  gamma: number;\n\n  /** Window size for coverage tracking */\n  coverageWindow?: number;\n\n  /** Minimum alpha value */\n  alphaMin?: number;\n\n  /** Maximum alpha value */\n  alphaMax?: number;\n}\n\nexport const defaultPredictorConfig: Required<PredictorConfig> = {\n  alpha: 0.1,\n  calibrationSize: 2000,\n  maxIntervalWidthPct: 5.0,\n  recalibrationFreq: 100,\n};\n\nexport const defaultAdaptiveConfig: Required<AdaptiveConfig> = {\n  targetCoverage: 0.90,\n  gamma: 0.02,\n  coverageWindow: 200,\n  alphaMin: 0.01,\n  alphaMax: 0.30,\n};\n","/**\n * Nonconformity score functions\n */\n\nexport interface NonconformityScore {\n  /** Compute nonconformity score */\n  score(prediction: number, actual: number): number;\n\n  /** Compute prediction interval given quantile */\n  interval(prediction: number, quantile: number): [number, number];\n}\n\n/**\n * Absolute residual score: |actual - prediction|\n */\nexport class AbsoluteScore implements NonconformityScore {\n  score(prediction: number, actual: number): number {\n    return Math.abs(actual - prediction);\n  }\n\n  interval(prediction: number, quantile: number): [number, number] {\n    return [prediction - quantile, prediction + quantile];\n  }\n}\n\n/**\n * Normalized score: residual divided by model uncertainty\n */\nexport class NormalizedScore implements NonconformityScore {\n  constructor(private stdDev: number = 1.0) {}\n\n  score(prediction: number, actual: number): number {\n    return Math.abs(actual - prediction) / Math.max(this.stdDev, 1e-6);\n  }\n\n  interval(prediction: number, quantile: number): [number, number] {\n    const width = quantile * this.stdDev;\n    return [prediction - width, prediction + width];\n  }\n\n  /** Update standard deviation estimate */\n  updateStdDev(stdDev: number): void {\n    this.stdDev = Math.max(stdDev, 1e-6);\n  }\n}\n\n/**\n * Quantile-based score for CQR\n */\nexport class QuantileScore implements NonconformityScore {\n  constructor(alphaLow: number = 0.05, alphaHigh: number = 0.95) {\n    if (alphaLow < 0 || alphaLow >= alphaHigh || alphaHigh > 1) {\n      throw new Error('Invalid quantile values');\n    }\n    // Validation complete - parameters validated but not stored as they're only used for validation\n  }\n\n  score(prediction: number, actual: number): number {\n    // For CQR, prediction should be [lower, upper] quantiles\n    // But for compatibility, we use symmetric assumption\n    const half = prediction * 0.05; // Approximate quantile range\n    return Math.max(prediction - half - actual, actual - (prediction + half));\n  }\n\n  interval(prediction: number, quantile: number): [number, number] {\n    return [prediction - quantile, prediction + quantile];\n  }\n\n  /**\n   * Compute score for quantile predictions\n   */\n  scoreQuantiles(qLow: number, qHigh: number, actual: number): number {\n    return Math.max(qLow - actual, actual - qHigh);\n  }\n}\n","/**\n * Pure TypeScript implementation of conformal prediction algorithms\n * Ports Rust algorithms with efficient sorting and binary search\n */\n\nimport {\n  PredictionInterval,\n  PredictionIntervalImpl,\n  PredictorConfig,\n  AdaptiveConfig,\n  defaultPredictorConfig,\n  defaultAdaptiveConfig,\n} from './types';\nimport { NonconformityScore, AbsoluteScore } from './scores';\n\n/**\n * Split Conformal Predictor\n * Provides distribution-free prediction intervals with guaranteed coverage\n *\n * Mathematical guarantee: P(y  [lower, upper])  1 - \n */\nexport class SplitConformalPredictor {\n  private alpha: number;\n  private calibrationSize: number;\n  private recalibrationFreq: number;\n  private scoreFunction: NonconformityScore;\n\n  private calibrationScores: number[] = [];\n  private quantile: number = 0;\n  private nCalibration: number = 0;\n  private predictionCount: number = 0;\n\n  constructor(config: Partial<PredictorConfig> = {}, scoreFunction?: NonconformityScore) {\n    const fullConfig = { ...defaultPredictorConfig, ...config };\n    this.alpha = fullConfig.alpha;\n    this.calibrationSize = fullConfig.calibrationSize;\n    // maxIntervalWidthPct from config reserved for future interval width constraints\n    void fullConfig.maxIntervalWidthPct;\n    this.recalibrationFreq = fullConfig.recalibrationFreq;\n    this.scoreFunction = scoreFunction || new AbsoluteScore();\n  }\n\n  /**\n   * Calibrate the predictor with historical data\n   * O(n log n) due to sorting\n   *\n   * @param predictions - Model's point predictions\n   * @param actuals - Actual observed values\n   */\n  async calibrate(predictions: number[], actuals: number[]): Promise<void> {\n    if (predictions.length !== actuals.length) {\n      throw new Error('Predictions and actuals must have same length');\n    }\n\n    if (predictions.length === 0) {\n      throw new Error('At least one calibration sample required');\n    }\n\n    // Compute nonconformity scores\n    const scores: number[] = [];\n    for (let i = 0; i < predictions.length; i++) {\n      const score = this.scoreFunction.score(predictions[i], actuals[i]);\n      scores.push(score);\n    }\n\n    // Sort scores for quantile computation\n    scores.sort((a, b) => a - b);\n\n    this.calibrationScores = scores;\n    this.nCalibration = scores.length;\n    this.updateQuantile();\n  }\n\n  /**\n   * Make a prediction with a confidence interval\n   * O(1) time after calibration\n   *\n   * @param pointPrediction - Model's point prediction\n   * @returns PredictionInterval with bounds\n   */\n  predict(pointPrediction: number): PredictionInterval {\n    if (this.nCalibration === 0) {\n      throw new Error('Predictor not calibrated');\n    }\n\n    const [lower, upper] = this.scoreFunction.interval(pointPrediction, this.quantile);\n\n    const interval = new PredictionIntervalImpl(\n      pointPrediction,\n      lower,\n      upper,\n      this.alpha,\n      this.quantile\n    );\n\n    this.predictionCount++;\n    return interval;\n  }\n\n  /**\n   * Update predictor with new observation\n   * O(log n) via binary search insertion\n   *\n   * @param prediction - Model's point prediction\n   * @param actual - Actual observed value\n   */\n  async update(prediction: number, actual: number): Promise<void> {\n    const score = this.scoreFunction.score(prediction, actual);\n\n    // Binary search for insertion point\n    const insertPos = this.binarySearchInsertPosition(score);\n    this.calibrationScores.splice(insertPos, 0, score);\n\n    // Maintain maximum window size\n    if (this.calibrationScores.length > this.calibrationSize) {\n      this.calibrationScores.shift();\n    }\n\n    this.nCalibration = this.calibrationScores.length;\n    this.updateQuantile();\n  }\n\n  /**\n   * Trigger full recalibration if needed\n   */\n  async recalibrate(predictions: number[], actuals: number[]): Promise<void> {\n    if (this.predictionCount % this.recalibrationFreq === 0) {\n      await this.calibrate(predictions, actuals);\n      this.predictionCount = 0;\n    }\n  }\n\n  /**\n   * Get empirical coverage from calibration set\n   */\n  getEmpiricalCoverage(predictions: number[], actuals: number[]): number {\n    if (predictions.length === 0) return 0;\n\n    let covered = 0;\n    for (let i = 0; i < predictions.length; i++) {\n      const interval = this.predict(predictions[i]);\n      if (interval.contains(actuals[i])) {\n        covered++;\n      }\n    }\n\n    return covered / predictions.length;\n  }\n\n  /**\n   * Get calibration statistics\n   */\n  getStats() {\n    return {\n      nCalibration: this.nCalibration,\n      alpha: this.alpha,\n      quantile: this.quantile,\n      predictionCount: this.predictionCount,\n      minScore: this.calibrationScores[0] ?? 0,\n      maxScore: this.calibrationScores[this.nCalibration - 1] ?? 0,\n    };\n  }\n\n  /**\n   * Update the quantile threshold based on sorted scores\n   * Follows: q = ceil((n+1)(1-alpha))/n\n   * @private\n   */\n  private updateQuantile(): void {\n    if (this.nCalibration === 0) {\n      this.quantile = 0;\n      return;\n    }\n\n    // Compute quantile index: ceil((n+1)(1-alpha))/n\n    const index = Math.ceil((this.nCalibration + 1) * (1 - this.alpha)) - 1;\n    const clampedIndex = Math.max(0, Math.min(index, this.nCalibration - 1));\n    this.quantile = this.calibrationScores[clampedIndex];\n  }\n\n  /**\n   * Find binary search insertion position\n   * @private\n   */\n  private binarySearchInsertPosition(score: number): number {\n    let left = 0;\n    let right = this.calibrationScores.length;\n\n    while (left < right) {\n      const mid = Math.floor((left + right) / 2);\n      if (this.calibrationScores[mid] < score) {\n        left = mid + 1;\n      } else {\n        right = mid;\n      }\n    }\n\n    return left;\n  }\n}\n\n/**\n * Adaptive Conformal Inference (ACI)\n * Dynamically adjusts alpha using PID control to track target coverage\n *\n * Maintains empirical coverage close to target by adapting alpha during streaming\n */\nexport class AdaptiveConformalPredictor {\n  private targetCoverage: number;\n  private gamma: number;\n  private coverageWindow: number;\n  private alphaMin: number;\n  private alphaMax: number;\n\n  private basePredictorConfig: Partial<PredictorConfig>;\n  private basePredictor: SplitConformalPredictor;\n  private scoreFunction: NonconformityScore;\n\n  private coverageHistory: number[] = [];\n  private alphaCurrent: number;\n\n  constructor(\n    config: Partial<AdaptiveConfig> = {},\n    scoreFunction?: NonconformityScore\n  ) {\n    const fullConfig = { ...defaultAdaptiveConfig, ...config };\n    this.targetCoverage = fullConfig.targetCoverage;\n    this.gamma = fullConfig.gamma;\n    this.coverageWindow = fullConfig.coverageWindow;\n    this.alphaMin = fullConfig.alphaMin;\n    this.alphaMax = fullConfig.alphaMax;\n\n    this.scoreFunction = scoreFunction || new AbsoluteScore();\n    this.alphaCurrent = 1 - this.targetCoverage;\n\n    this.basePredictorConfig = {\n      alpha: this.alphaCurrent,\n    };\n\n    this.basePredictor = new SplitConformalPredictor(\n      this.basePredictorConfig,\n      this.scoreFunction\n    );\n  }\n\n  /**\n   * Initialize with calibration data\n   *\n   * @param predictions - Initial predictions for calibration\n   * @param actuals - Actual values for calibration\n   */\n  async calibrate(predictions: number[], actuals: number[]): Promise<void> {\n    await this.basePredictor.calibrate(predictions, actuals);\n  }\n\n  /**\n   * Make prediction and adapt alpha based on coverage\n   * O(log n) with binary search\n   *\n   * @param pointPrediction - Model's point prediction\n   * @param actual - Optional actual value for adaptation\n   * @returns PredictionInterval\n   */\n  async predictAndAdapt(pointPrediction: number, actual?: number): Promise<PredictionInterval> {\n    // Make prediction with current alpha\n    const interval = this.basePredictor.predict(pointPrediction);\n\n    // If actual is provided, adapt alpha\n    if (actual !== undefined) {\n      const covered = interval.contains(actual) ? 1 : 0;\n      this.coverageHistory.push(covered);\n\n      // Maintain window size\n      if (this.coverageHistory.length > this.coverageWindow) {\n        this.coverageHistory.shift();\n      }\n\n      // PID control: adjust alpha based on coverage error\n      const empirical = this.empiricalCoverage();\n      const error = this.targetCoverage - empirical;\n\n      // Update alpha: alpha -= gamma * error\n      this.alphaCurrent -= this.gamma * error;\n\n      // Clamp alpha to valid range\n      this.alphaCurrent = Math.max(this.alphaMin, Math.min(this.alphaMax, this.alphaCurrent));\n\n      // Update base predictor's alpha\n      const updatedConfig = { ...this.basePredictorConfig, alpha: this.alphaCurrent };\n      this.basePredictor = new SplitConformalPredictor(updatedConfig, this.scoreFunction);\n\n      // Update base predictor with new observation\n      await this.basePredictor.update(pointPrediction, actual);\n    }\n\n    return interval;\n  }\n\n  /**\n   * Standard prediction without adaptation\n   *\n   * @param pointPrediction - Model's point prediction\n   * @returns PredictionInterval\n   */\n  predict(pointPrediction: number): PredictionInterval {\n    return this.basePredictor.predict(pointPrediction);\n  }\n\n  /**\n   * Update predictor with new observation\n   *\n   * @param prediction - Model's point prediction\n   * @param actual - Actual observed value\n   */\n  async update(prediction: number, actual: number): Promise<void> {\n    await this.basePredictor.update(prediction, actual);\n  }\n\n  /**\n   * Compute empirical coverage from history\n   * Simple average of coverage indicator in the window\n   */\n  empiricalCoverage(): number {\n    if (this.coverageHistory.length === 0) {\n      return this.targetCoverage; // Default to target if no history\n    }\n\n    const sum = this.coverageHistory.reduce((a, b) => a + b, 0);\n    return sum / this.coverageHistory.length;\n  }\n\n  /**\n   * Get current alpha value\n   */\n  getCurrentAlpha(): number {\n    return this.alphaCurrent;\n  }\n\n  /**\n   * Get statistics including coverage metrics\n   */\n  getStats() {\n    const empirical = this.empiricalCoverage();\n    return {\n      ...this.basePredictor.getStats(),\n      alphaCurrent: this.alphaCurrent,\n      empiricalCoverage: empirical,\n      targetCoverage: this.targetCoverage,\n      coverageDifference: this.targetCoverage - empirical,\n      coverageHistorySize: this.coverageHistory.length,\n    };\n  }\n}\n\n/**\n * Conformalized Quantile Regression (CQR) Predictor\n * Uses quantile predictions from model for prediction intervals\n */\nexport class CQRPredictor {\n  private alpha: number;\n  private calibrationSize: number;\n  // @ts-ignore scoreFunction reserved for future quantile-based extensions\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private scoreFunction: NonconformityScore;\n\n  private calibrationScores: number[] = [];\n  private quantile: number = 0;\n  private nCalibration: number = 0;\n\n  private alphaLow: number;\n  private alphaHigh: number;\n\n  constructor(\n    config: Partial<PredictorConfig> = {},\n    alphaLow: number = 0.05,\n    alphaHigh: number = 0.95,\n    scoreFunction?: NonconformityScore\n  ) {\n    if (alphaLow < 0 || alphaLow >= alphaHigh || alphaHigh > 1) {\n      throw new Error('Invalid quantile values');\n    }\n\n    const fullConfig = { ...defaultPredictorConfig, ...config };\n    this.alpha = fullConfig.alpha;\n    this.calibrationSize = fullConfig.calibrationSize;\n    // scoreFunction reserved for future quantile-based extensions\n    this.scoreFunction = scoreFunction || new AbsoluteScore();\n    this.alphaLow = alphaLow;\n    this.alphaHigh = alphaHigh;\n  }\n\n  /**\n   * Calibrate with quantile predictions\n   *\n   * @param qLow - Lower quantile predictions\n   * @param qHigh - Upper quantile predictions\n   * @param actuals - Actual observed values\n   */\n  async calibrate(qLow: number[], qHigh: number[], actuals: number[]): Promise<void> {\n    if (qLow.length !== qHigh.length || qLow.length !== actuals.length) {\n      throw new Error('All arrays must have same length');\n    }\n\n    if (qLow.length === 0) {\n      throw new Error('At least one calibration sample required');\n    }\n\n    // Compute nonconformity scores for quantile predictions\n    const scores: number[] = [];\n    for (let i = 0; i < qLow.length; i++) {\n      const score = Math.max(qLow[i] - actuals[i], actuals[i] - qHigh[i]);\n      scores.push(score);\n    }\n\n    // Sort for quantile\n    scores.sort((a, b) => a - b);\n    this.calibrationScores = scores;\n    this.nCalibration = scores.length;\n    this.updateQuantile();\n  }\n\n  /**\n   * Make CQR prediction with adjusted quantile bounds\n   *\n   * @param qLow - Lower quantile prediction from model\n   * @param qHigh - Upper quantile prediction from model\n   * @returns PredictionInterval with adjusted bounds\n   */\n  predict(qLow: number, qHigh: number): PredictionInterval {\n    if (this.nCalibration === 0) {\n      throw new Error('Predictor not calibrated');\n    }\n\n    // Adjust quantiles by computed quantile threshold\n    const lower = qLow - this.quantile;\n    const upper = qHigh + this.quantile;\n    const point = (qLow + qHigh) / 2;\n\n    return new PredictionIntervalImpl(point, lower, upper, this.alpha, this.quantile);\n  }\n\n  /**\n   * Update with new observation\n   *\n   * @param qLow - Lower quantile prediction\n   * @param qHigh - Upper quantile prediction\n   * @param actual - Actual observed value\n   */\n  async update(qLow: number, qHigh: number, actual: number): Promise<void> {\n    const score = Math.max(qLow - actual, actual - qHigh);\n    const insertPos = this.binarySearchInsertPosition(score);\n    this.calibrationScores.splice(insertPos, 0, score);\n\n    if (this.calibrationScores.length > this.calibrationSize) {\n      this.calibrationScores.shift();\n    }\n\n    this.nCalibration = this.calibrationScores.length;\n    this.updateQuantile();\n  }\n\n  /**\n   * Get statistics\n   */\n  getStats() {\n    return {\n      nCalibration: this.nCalibration,\n      alpha: this.alpha,\n      alphaLow: this.alphaLow,\n      alphaHigh: this.alphaHigh,\n      quantile: this.quantile,\n      minScore: this.calibrationScores[0] ?? 0,\n      maxScore: this.calibrationScores[this.nCalibration - 1] ?? 0,\n    };\n  }\n\n  /**\n   * Update quantile threshold\n   * @private\n   */\n  private updateQuantile(): void {\n    if (this.nCalibration === 0) {\n      this.quantile = 0;\n      return;\n    }\n\n    const index = Math.ceil((this.nCalibration + 1) * (1 - this.alpha)) - 1;\n    const clampedIndex = Math.max(0, Math.min(index, this.nCalibration - 1));\n    this.quantile = this.calibrationScores[clampedIndex];\n  }\n\n  /**\n   * Binary search insertion position\n   * @private\n   */\n  private binarySearchInsertPosition(score: number): number {\n    let left = 0;\n    let right = this.calibrationScores.length;\n\n    while (left < right) {\n      const mid = Math.floor((left + right) / 2);\n      if (this.calibrationScores[mid] < score) {\n        left = mid + 1;\n      } else {\n        right = mid;\n      }\n    }\n\n    return left;\n  }\n}\n","/**\n * Factory pattern for automatic implementation selection\n * Detects and uses best available implementation: native > WASM > pure JS\n */\n\nimport { SplitConformalPredictor, AdaptiveConformalPredictor } from './pure/conformal';\nimport type { NonconformityScore } from './pure/scores';\n\nexport type ImplementationType = 'native' | 'wasm' | 'pure';\n\nexport interface PredictorImplementation {\n  type: ImplementationType;\n  predictor: SplitConformalPredictor | AdaptiveConformalPredictor;\n}\n\n/**\n * Factory configuration options\n */\nexport interface FactoryConfig {\n  alpha?: number;\n  scoreFunction?: NonconformityScore;\n  implementation?: 'auto' | 'native' | 'wasm' | 'pure';\n  preferNative?: boolean;\n  fallbackToWasm?: boolean;\n  fallbackToPure?: boolean;\n}\n\nexport interface AdaptiveFactoryConfig extends FactoryConfig {\n  targetCoverage?: number;\n  gamma?: number;\n}\n\n/**\n * Detect available implementations\n * @internal\n */\nasync function detectImplementations(): Promise<Set<ImplementationType>> {\n  const available = new Set<ImplementationType>();\n\n  // Always available\n  available.add('pure');\n\n  // Try to detect WASM (optional)\n  try {\n    // Check if wasm module can be imported\n    if (typeof globalThis !== 'undefined') {\n      // Would load WASM package if available\n      // For now, mark as potentially available but we won't use it\n      // available.add('wasm');\n    }\n  } catch (e) {\n    // WASM not available\n  }\n\n  // Try to detect native addon (optional)\n  try {\n    // Check for native binding through optional dependency\n    // eslint-disable-next-line global-require, @typescript-eslint/no-var-requires\n    const nativeModule = require('@neural-trader/predictor-native');\n    if (nativeModule) {\n      available.add('native');\n    }\n  } catch (e) {\n    // Native binding not available\n  }\n\n  return available;\n}\n\n/**\n * Select best available implementation\n * Priority: native > wasm > pure\n * @internal\n */\nasync function selectImplementation(\n  options: FactoryConfig\n): Promise<ImplementationType> {\n  if (options.implementation && options.implementation !== 'auto') {\n    return options.implementation;\n  }\n\n  const available = await detectImplementations();\n\n  // Explicit preference\n  if (options.preferNative && available.has('native')) {\n    return 'native';\n  }\n\n  if (options.fallbackToWasm && available.has('wasm')) {\n    return 'wasm';\n  }\n\n  // Default priority: native > wasm > pure\n  if (available.has('native')) {\n    return 'native';\n  }\n\n  if (available.has('wasm')) {\n    return 'wasm';\n  }\n\n  return 'pure';\n}\n\n/**\n * Create a SplitConformalPredictor with automatic implementation selection\n *\n * Automatically detects and uses the best available implementation:\n * - Native (NAPI-rs): Fastest, requires compilation\n * - WASM: Good performance, smaller bundle size (requires wasm-pack)\n * - Pure JS: Always available, works everywhere\n *\n * @param config - Configuration options\n * @param scoreFunction - Nonconformity score function\n * @returns Promise resolving to predictor and implementation type\n *\n * @example\n * ```typescript\n * const { predictor, type } = await createPredictor({\n *   alpha: 0.1,\n *   preferNative: true,\n * });\n *\n * console.log(`Using ${type} implementation`);\n * await predictor.calibrate(predictions, actuals);\n * ```\n */\nexport async function createPredictor(\n  config: FactoryConfig = {},\n  scoreFunction?: NonconformityScore\n): Promise<{ predictor: SplitConformalPredictor; type: ImplementationType }> {\n  const implementation = await selectImplementation(config);\n\n  let predictor: SplitConformalPredictor;\n\n  if (implementation === 'native') {\n    try {\n      // Lazy load native implementation\n      const { NativeConformalPredictor } = await lazyLoadNative();\n      predictor = new NativeConformalPredictor(\n        { alpha: config.alpha },\n        scoreFunction\n      );\n      return { predictor, type: 'native' };\n    } catch (e) {\n      console.warn('Failed to load native implementation, falling back to WASM', e);\n    }\n  }\n\n  if (implementation === 'wasm' || implementation === 'native') {\n    try {\n      // Lazy load WASM implementation\n      const { WasmConformalPredictor } = await lazyLoadWasm();\n      predictor = new WasmConformalPredictor(\n        { alpha: config.alpha },\n        scoreFunction\n      );\n      return { predictor, type: 'wasm' };\n    } catch (e) {\n      console.warn('Failed to load WASM implementation, falling back to pure JS', e);\n    }\n  }\n\n  // Always available pure JS fallback\n  predictor = new SplitConformalPredictor(\n    { alpha: config.alpha },\n    scoreFunction\n  );\n  return { predictor, type: 'pure' };\n}\n\n/**\n * Create an AdaptiveConformalPredictor with automatic implementation selection\n *\n * Same as createPredictor but for adaptive variant\n *\n * @param config - Configuration options\n * @param scoreFunction - Nonconformity score function\n * @returns Promise resolving to adaptive predictor and implementation type\n */\nexport async function createAdaptivePredictor(\n  config: AdaptiveFactoryConfig = {},\n  scoreFunction?: NonconformityScore\n): Promise<{ predictor: AdaptiveConformalPredictor; type: ImplementationType }> {\n  const implementation = await selectImplementation(config);\n\n  let predictor: AdaptiveConformalPredictor;\n\n  if (implementation === 'native') {\n    try {\n      // Lazy load native implementation\n      const { NativeAdaptiveConformalPredictor } = await lazyLoadNative();\n      predictor = new NativeAdaptiveConformalPredictor(\n        {\n          targetCoverage: config.targetCoverage,\n          gamma: config.gamma,\n        },\n        scoreFunction\n      );\n      return { predictor, type: 'native' };\n    } catch (e) {\n      console.warn('Failed to load native implementation, falling back to WASM', e);\n    }\n  }\n\n  if (implementation === 'wasm' || implementation === 'native') {\n    try {\n      // Lazy load WASM implementation\n      const { WasmAdaptiveConformalPredictor } = await lazyLoadWasm();\n      predictor = new WasmAdaptiveConformalPredictor(\n        {\n          targetCoverage: config.targetCoverage,\n          gamma: config.gamma,\n        },\n        scoreFunction\n      );\n      return { predictor, type: 'wasm' };\n    } catch (e) {\n      console.warn('Failed to load WASM implementation, falling back to pure JS', e);\n    }\n  }\n\n  // Always available pure JS fallback\n  predictor = new AdaptiveConformalPredictor(\n    {\n      targetCoverage: config.targetCoverage,\n      gamma: config.gamma,\n    },\n    scoreFunction\n  );\n  return { predictor, type: 'pure' };\n}\n\n/**\n * Lazy load native NAPI implementation\n * @internal\n */\nasync function lazyLoadNative(): Promise<any> {\n  // Dynamic import for lazy loading\n  if (typeof globalThis !== 'undefined' && typeof require !== 'undefined') {\n    try {\n      // @ts-expect-error - Optional native dependency may not be installed\n      return await import('@neural-trader/predictor-native');\n    } catch (e) {\n      throw new Error('Native implementation not available');\n    }\n  }\n  throw new Error('Native implementation not available in this environment');\n}\n\n/**\n * Lazy load WASM implementation\n * @internal\n */\nasync function lazyLoadWasm(): Promise<any> {\n  // Dynamic import for lazy loading\n  try {\n    if (typeof globalThis !== 'undefined') {\n      // Would load WASM module here\n      // @ts-expect-error optional WASM dependency\n      const wasmModule = await import('../wasm-pkg/index.js');\n      return wasmModule;\n    }\n    throw new Error('WASM not available in this environment');\n  } catch (e) {\n    throw new Error('WASM implementation not available');\n  }\n}\n\n/**\n * Detect current implementation type\n * Useful for logging and debugging\n *\n * @returns Promise resolving to available implementation types\n *\n * @example\n * ```typescript\n * const available = await detectAvailableImplementations();\n * console.log('Available implementations:', available);\n * ```\n */\nexport async function detectAvailableImplementations(): Promise<ImplementationType[]> {\n  const available = await detectImplementations();\n  return Array.from(available);\n}\n\n/**\n * Get implementation information\n * @internal\n */\nexport function getImplementationInfo(type: ImplementationType): {\n  name: string;\n  description: string;\n  performance: string;\n} {\n  const info: Record<ImplementationType, any> = {\n    native: {\n      name: 'Native (NAPI-rs)',\n      description: 'High-performance Rust implementation via Node.js native addon',\n      performance: '~1x (baseline, fastest)',\n    },\n    wasm: {\n      name: 'WebAssembly (Rust compiled to WASM)',\n      description: 'Good performance with smaller bundle size than native',\n      performance: '~1-2x slower than native',\n    },\n    pure: {\n      name: 'Pure TypeScript',\n      description: 'Pure JavaScript implementation with no external dependencies',\n      performance: '~5-10x slower than native',\n    },\n  };\n\n  return info[type];\n}\n","// Enhanced Pattern Engine with RuVector GNN and TensorCompress\n// Based on RUVECTOR_PACKAGE_OPTIMIZATION.md Section 1\n\nimport { VectorDB } from 'ruvector';\nimport { RuvectorLayer, TensorCompress } from '@ruvector/gnn';\nimport type {\n  MarketPattern,\n  PatternSearchResult,\n  EnhancedMetadata,\n  CompressionLevel,\n  DBStats,\n} from './types';\n\n/**\n * Enhanced Pattern Recognition Engine\n *\n * Features:\n * - GNN neighbor enhancement with RuvectorLayer\n * - 4-tier adaptive compression (32x memory reduction)\n * - HNSW index (8.2x faster search, 61s latency)\n * - Automatic index rebuilding every 1000 patterns\n *\n * Performance:\n * - Pattern search: 61s (vs AgentDB ~500s)\n * - Memory: 32x reduction for historical patterns\n * - GNN boost: +5-15% prediction accuracy\n * - Batch loading: 10,000 patterns/sec\n */\nexport class EnhancedPatternEngine {\n  private db: InstanceType<typeof VectorDB>;\n  private gnn: RuvectorLayer;\n  private compressor: TensorCompress;\n  private dimension = 384;\n\n  constructor() {\n    // HNSW-optimized VectorDB\n    this.db = new VectorDB({\n      dimension: this.dimension,\n      metric: 'cosine',\n      path: './data/patterns/enhanced.db',\n      autoPersist: true,\n      hnsw: {\n        m: 16,              // Connections per node (16 = balanced)\n        efConstruction: 200, // Build quality (higher = better but slower build)\n        efSearch: 100        // Search quality (higher = better but slower search)\n      }\n    });\n\n    // GNN layer: input_dim=384, hidden_dim=512, heads=4, dropout=0.1\n    this.gnn = new RuvectorLayer(this.dimension, 512, 4, 0.1);\n    this.compressor = new TensorCompress();\n  }\n\n  /**\n   * Learn from prediction outcome with GNN enhancement\n   *\n   * Access frequency determines compression level:\n   * - 0.9+ (hot): No compression (recent profitable patterns)\n   * - 0.7-0.9 (warm): FP16 (active patterns)\n   * - 0.3-0.7 (cool): PQ8 (occasional patterns)\n   * - 0.1-0.3 (cold): PQ4 (rare patterns)\n   * - <0.1 (archive): Binary quantization (historical patterns)\n   *\n   * @param pattern - Market pattern with embedding and metadata\n   * @param actualOutcome - Actual market outcome\n   * @param predictedOutcome - Predicted market outcome\n   */\n  async learnFromPrediction(\n    pattern: MarketPattern,\n    actualOutcome: number,\n    predictedOutcome: number\n  ): Promise<void> {\n    const accuracy = 1 - Math.abs(actualOutcome - predictedOutcome) / Math.abs(actualOutcome);\n\n    // Step 1: Find similar historical patterns (neighbors)\n    const neighbors = this.db.search({\n      vector: pattern.embedding,\n      k: 5,\n      threshold: 0.7 // Cosine similarity >= 0.7\n    });\n\n    // Step 2: Enhance embedding with GNN if neighbors exist\n    let enhancedEmbedding = pattern.embedding;\n    if (neighbors.length > 0) {\n      const neighborEmbeddings = neighbors.map((n: any) => n.vector!);\n      const edgeWeights = neighbors.map((n: any) => 1 - n.distance); // Distance -> similarity\n\n      enhancedEmbedding = this.gnn.forward(\n        pattern.embedding,\n        neighborEmbeddings,\n        edgeWeights\n      );\n    }\n\n    // Step 3: Adaptive compression based on pattern quality\n    const accessFreq = accuracy > 0.8 ? 0.9 : // Hot: profitable patterns\n                       accuracy > 0.6 ? 0.7 : // Warm: decent patterns\n                       accuracy > 0.4 ? 0.5 : // Cool: mediocre patterns\n                       accuracy > 0.2 ? 0.2 : // Cold: poor patterns\n                       0.05;                  // Archive: very poor patterns\n\n    const compressed = this.compressor.compress(enhancedEmbedding, accessFreq);\n\n    // Step 4: Store enhanced + compressed pattern\n    this.db.insert({\n      id: `pattern_${Date.now()}_${pattern.metadata.symbol}`,\n      vector: enhancedEmbedding,\n      metadata: {\n        ...pattern.metadata,\n        accuracy,\n        compressed: compressed as any, // CompressedPattern from @ruvector/compress\n        gnnEnhanced: neighbors.length > 0,\n        neighborCount: neighbors.length,\n        compressionLevel: this.getCompressionLevel(accessFreq)\n      } as EnhancedMetadata\n    });\n\n    // Step 5: Rebuild index every 1000 patterns for optimal search\n    const stats = this.db.stats();\n    if (stats.size % 1000 === 0) {\n      this.db.buildIndex();\n      console.log(`[PatternEngine] Rebuilt HNSW index at ${stats.size} patterns`);\n    }\n  }\n\n  /**\n   * Find similar patterns with HNSW (61s average latency)\n   *\n   * @param currentPattern - Current market pattern embedding\n   * @param k - Number of similar patterns to return\n   * @param regime - Optional market regime filter\n   * @returns Array of similar patterns with similarity scores\n   */\n  async findSimilarPatterns(\n    currentPattern: number[],\n    k: number = 10,\n    regime?: 'bull' | 'bear' | 'sideways'\n  ): Promise<PatternSearchResult[]> {\n    const results = this.db.search({\n      vector: currentPattern,\n      k,\n      threshold: 0.6\n    });\n\n    // Optional: Filter by market regime\n    const filtered = regime\n      ? results.filter((r: any) => r.metadata?.regime === regime)\n      : results;\n\n    return filtered.map((r: any) => ({\n      pattern: {\n        embedding: r.vector!,\n        metadata: r.metadata as MarketPattern['metadata']\n      },\n      similarity: 1 - r.distance / 2 // Cosine distance -> similarity\n    }));\n  }\n\n  /**\n   * Batch insertion for backtesting (fast bulk loading)\n   *\n   * Performance: 10,000 patterns/sec\n   *\n   * @param patterns - Array of market patterns to load\n   */\n  async bulkLoadPatterns(patterns: MarketPattern[]): Promise<void> {\n    const entries = patterns.map((p, i) => ({\n      id: `bulk_${Date.now()}_${i}`,\n      vector: p.embedding,\n      metadata: p.metadata\n    }));\n\n    this.db.insertBatch(entries);\n    this.db.buildIndex(); // Single index build after bulk load\n  }\n\n  /**\n   * Optimize database (compression + defragmentation)\n   */\n  async optimize(): Promise<void> {\n    this.db.optimize();\n    this.db.save(); // Persist optimized state\n  }\n\n  /**\n   * Get compression tier from access frequency\n   *\n   * @param accessFreq - Access frequency (0-1)\n   * @returns Compression level name\n   */\n  private getCompressionLevel(accessFreq: number): CompressionLevel {\n    if (accessFreq >= 0.9) return 'hot_none';\n    if (accessFreq >= 0.7) return 'warm_fp16';\n    if (accessFreq >= 0.3) return 'cool_pq8';\n    if (accessFreq >= 0.1) return 'cold_pq4';\n    return 'archive_binary';\n  }\n\n  /**\n   * Get database statistics\n   *\n   * @returns Database stats including size, dimension, and index status\n   */\n  getStats(): DBStats {\n    return this.db.stats();\n  }\n\n  /**\n   * Save database to disk\n   */\n  save(): void {\n    this.db.save();\n  }\n\n  /**\n   * Load database from disk\n   */\n  load(): void {\n    this.db.load();\n  }\n\n  /**\n   * Clear all patterns from database\n   */\n  clear(): void {\n    this.db.clear();\n  }\n}\n\n/**\n * HNSW Parameter Tuning Presets\n */\nexport const HNSWPresets = {\n  /**\n   * High-accuracy predictions (slower build, faster search)\n   * Use for: Production trading, high-frequency strategies\n   */\n  highAccuracy: {\n    m: 32,\n    efConstruction: 400,\n    efSearch: 200\n  },\n\n  /**\n   * Balanced (default)\n   * Use for: General purpose, most applications\n   */\n  balanced: {\n    m: 16,\n    efConstruction: 200,\n    efSearch: 100\n  },\n\n  /**\n   * Fast insertion (faster build, acceptable search)\n   * Use for: Backtesting, rapid prototyping\n   */\n  fastInsertion: {\n    m: 8,\n    efConstruction: 100,\n    efSearch: 50\n  }\n} as const;\n\n/**\n * Compression Strategy Guidelines\n *\n * Hot patterns (recent profitable): No compression\n * - accessFreq: 0.9+  stores full float32[384] = 1.5KB\n *\n * Warm patterns (active): FP16 compression\n * - accessFreq: 0.7-0.9  stores float16[384] = 768B (2x reduction)\n *\n * Cool patterns (occasional): PQ8 compression\n * - accessFreq: 0.3-0.7  stores uint8[48] + codebook = ~96B (16x reduction)\n *\n * Cold patterns (rare): PQ4 compression\n * - accessFreq: 0.1-0.3  stores uint4[48] + codebook = ~48B (32x reduction)\n *\n * Archive patterns (historical): Binary quantization\n * - accessFreq: <0.1  stores bits[384] = 48B (32x reduction)\n */\nexport const CompressionInfo = {\n  hot_none: { size: 1536, reduction: '1x', description: 'Full float32' },\n  warm_fp16: { size: 768, reduction: '2x', description: 'FP16 compression' },\n  cool_pq8: { size: 96, reduction: '16x', description: 'PQ8 + codebook' },\n  cold_pq4: { size: 48, reduction: '32x', description: 'PQ4 + codebook' },\n  archive_binary: { size: 48, reduction: '32x', description: 'Binary quantization' }\n} as const;\n"]}