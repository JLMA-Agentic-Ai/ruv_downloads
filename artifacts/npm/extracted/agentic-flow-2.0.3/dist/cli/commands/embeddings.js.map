{"version":3,"file":"embeddings.js","sourceRoot":"","sources":["../../../src/cli/commands/embeddings.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Embeddings CLI Commands\n *\n * Commands for managing ONNX embedding models:\n * - init: Download and initialize default model\n * - download: Download specific model\n * - list: List available models\n * - benchmark: Run embedding benchmarks\n * - neural: Neural Embedding Substrate commands\n */\n\nimport {\n  downloadModel,\n  listAvailableModels,\n  getOptimizedEmbedder,\n  cosineSimilarity,\n  DEFAULT_CONFIG,\n  getNeuralSubstrate\n} from '../../embeddings/index.js';\n\nexport async function handleEmbeddingsCommand(args: string[]): Promise<void> {\n  const subcommand = args[0] || 'help';\n\n  switch (subcommand) {\n    case 'init':\n      await handleInit(args.slice(1));\n      break;\n    case 'download':\n      await handleDownload(args.slice(1));\n      break;\n    case 'list':\n      handleList();\n      break;\n    case 'benchmark':\n      await handleBenchmark(args.slice(1));\n      break;\n    case 'status':\n      await handleStatus();\n      break;\n    case 'neural':\n      await handleNeural(args.slice(1));\n      break;\n    case 'help':\n    default:\n      printHelp();\n  }\n}\n\nasync function handleInit(args: string[]): Promise<void> {\n  const modelId = args[0] || DEFAULT_CONFIG.modelId;\n\n  console.log('üöÄ Initializing Agentic-Flow Embeddings\\n');\n  console.log(`Model: ${modelId}`);\n  console.log(`Cache: ${DEFAULT_CONFIG.modelDir}`);\n  console.log('');\n\n  try {\n    // Download model\n    console.log('üì• Downloading model...');\n    await downloadModel(modelId, DEFAULT_CONFIG.modelDir, (progress) => {\n      const bar = '‚ñà'.repeat(Math.floor(progress.percent / 5)) + '‚ñë'.repeat(20 - Math.floor(progress.percent / 5));\n      process.stdout.write(`\\r   [${bar}] ${progress.percent.toFixed(1)}%`);\n    });\n    console.log('\\n   ‚úì Download complete\\n');\n\n    // Initialize embedder\n    console.log('üîß Initializing embedder...');\n    const embedder = getOptimizedEmbedder({ modelId });\n    await embedder.init();\n    console.log('   ‚úì Embedder ready\\n');\n\n    // Quick validation\n    console.log('üß™ Validating...');\n    const startTime = Date.now();\n    const testEmb = await embedder.embed('Hello, world!');\n    const latency = Date.now() - startTime;\n\n    const norm = Math.sqrt(testEmb.reduce((s, v) => s + v * v, 0));\n    console.log(`   ‚úì Dimension: ${testEmb.length}`);\n    console.log(`   ‚úì Norm: ${norm.toFixed(4)}`);\n    console.log(`   ‚úì Latency: ${latency}ms\\n`);\n\n    console.log('‚úÖ Embeddings initialized successfully!\\n');\n    console.log('Usage:');\n    console.log('  import { getOptimizedEmbedder } from \"agentic-flow/embeddings\"');\n    console.log('  const embedder = getOptimizedEmbedder();');\n    console.log('  const embedding = await embedder.embed(\"Your text here\");');\n\n  } catch (error) {\n    console.error('\\n‚ùå Initialization failed:', error instanceof Error ? error.message : String(error));\n    process.exit(1);\n  }\n}\n\nasync function handleDownload(args: string[]): Promise<void> {\n  const modelId = args[0];\n\n  if (!modelId) {\n    console.log('Available models:\\n');\n    handleList();\n    console.log('\\nUsage: agentic-flow embeddings download <model-id>');\n    return;\n  }\n\n  console.log(`üì• Downloading ${modelId}...\\n`);\n\n  try {\n    await downloadModel(modelId, DEFAULT_CONFIG.modelDir, (progress) => {\n      const mb = (progress.bytesDownloaded / 1024 / 1024).toFixed(1);\n      const totalMb = (progress.totalBytes / 1024 / 1024).toFixed(1);\n      const bar = '‚ñà'.repeat(Math.floor(progress.percent / 5)) + '‚ñë'.repeat(20 - Math.floor(progress.percent / 5));\n      process.stdout.write(`\\r[${bar}] ${progress.percent.toFixed(1)}% (${mb}/${totalMb} MB)`);\n    });\n    console.log('\\n\\n‚úÖ Download complete!');\n  } catch (error) {\n    console.error('\\n‚ùå Download failed:', error instanceof Error ? error.message : String(error));\n    process.exit(1);\n  }\n}\n\nfunction handleList(): void {\n  const models = listAvailableModels();\n\n  console.log('Available Embedding Models:\\n');\n  console.log('‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê');\n  console.log('‚îÇ Model ID                ‚îÇ Dimension ‚îÇ Size    ‚îÇ Quantized ‚îÇ Downloaded ‚îÇ');\n  console.log('‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§');\n\n  for (const model of models) {\n    const id = model.id.padEnd(23);\n    const dim = String(model.dimension).padEnd(9);\n    const size = model.size.padEnd(7);\n    const quant = (model.quantized ? 'Yes' : 'No').padEnd(9);\n    const downloaded = model.downloaded ? '‚úì' : ' ';\n\n    console.log(`‚îÇ ${id} ‚îÇ ${dim} ‚îÇ ${size} ‚îÇ ${quant} ‚îÇ     ${downloaded}      ‚îÇ`);\n  }\n\n  console.log('‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò');\n  console.log('\\nRecommended: all-MiniLM-L6-v2 (quantized, 23MB, best speed/quality)');\n}\n\nasync function handleBenchmark(args: string[]): Promise<void> {\n  const iterations = parseInt(args[0] || '100', 10);\n\n  console.log('üèÉ Running Embedding Benchmarks\\n');\n  console.log(`Iterations: ${iterations}\\n`);\n\n  const embedder = getOptimizedEmbedder();\n\n  try {\n    await embedder.init();\n  } catch (error) {\n    console.error('‚ùå Embedder not initialized. Run: agentic-flow embeddings init');\n    process.exit(1);\n  }\n\n  // Warm-up\n  console.log('Warming up...');\n  for (let i = 0; i < 10; i++) {\n    await embedder.embed(`Warm-up text ${i}`);\n  }\n  embedder.clearCache();\n\n  // Benchmark single embedding (cold)\n  console.log('\\nüìä Single Embedding (cold cache):');\n  const coldTimes: number[] = [];\n  for (let i = 0; i < iterations; i++) {\n    const start = performance.now();\n    await embedder.embed(`Benchmark text ${i} with unique content`);\n    coldTimes.push(performance.now() - start);\n  }\n  embedder.clearCache();\n\n  const coldAvg = coldTimes.reduce((a, b) => a + b, 0) / coldTimes.length;\n  const coldP95 = coldTimes.sort((a, b) => a - b)[Math.floor(iterations * 0.95)];\n  console.log(`   Average: ${coldAvg.toFixed(2)}ms`);\n  console.log(`   P95: ${coldP95.toFixed(2)}ms`);\n\n  // Benchmark cached embedding\n  console.log('\\nüìä Single Embedding (warm cache):');\n  const testText = 'This is a cached benchmark text';\n  await embedder.embed(testText);\n\n  const warmTimes: number[] = [];\n  for (let i = 0; i < iterations; i++) {\n    const start = performance.now();\n    await embedder.embed(testText);\n    warmTimes.push(performance.now() - start);\n  }\n\n  const warmAvg = warmTimes.reduce((a, b) => a + b, 0) / warmTimes.length;\n  const warmP95 = warmTimes.sort((a, b) => a - b)[Math.floor(iterations * 0.95)];\n  console.log(`   Average: ${warmAvg.toFixed(3)}ms`);\n  console.log(`   P95: ${warmP95.toFixed(3)}ms`);\n  console.log(`   Speedup: ${(coldAvg / warmAvg).toFixed(1)}x`);\n\n  // Benchmark cosine similarity\n  console.log('\\nüìä Cosine Similarity:');\n  const emb1 = await embedder.embed('First embedding');\n  const emb2 = await embedder.embed('Second embedding');\n\n  const simTimes: number[] = [];\n  for (let i = 0; i < iterations * 10; i++) {\n    const start = performance.now();\n    cosineSimilarity(emb1, emb2);\n    simTimes.push(performance.now() - start);\n  }\n\n  const simAvg = simTimes.reduce((a, b) => a + b, 0) / simTimes.length;\n  console.log(`   Average: ${(simAvg * 1000).toFixed(2)}Œºs`);\n  console.log(`   Ops/sec: ${(1000 / simAvg).toFixed(0)}`);\n\n  // Benchmark batch embedding\n  console.log('\\nüìä Batch Embedding (10 texts):');\n  embedder.clearCache();\n  const batchTexts = Array.from({ length: 10 }, (_, i) => `Batch text number ${i}`);\n\n  const batchTimes: number[] = [];\n  for (let i = 0; i < iterations / 10; i++) {\n    embedder.clearCache();\n    const start = performance.now();\n    await embedder.embedBatch(batchTexts.map((t, j) => `${t} iter ${i * 10 + j}`));\n    batchTimes.push(performance.now() - start);\n  }\n\n  const batchAvg = batchTimes.reduce((a, b) => a + b, 0) / batchTimes.length;\n  console.log(`   Average: ${batchAvg.toFixed(2)}ms`);\n  console.log(`   Per embedding: ${(batchAvg / 10).toFixed(2)}ms`);\n\n  console.log('\\n‚úÖ Benchmark complete!');\n  console.log(`\\nCache stats: ${embedder.getCacheStats().size}/${embedder.getCacheStats().maxSize} entries`);\n}\n\nasync function handleStatus(): Promise<void> {\n  console.log('üìä Embeddings Status\\n');\n\n  console.log(`Model directory: ${DEFAULT_CONFIG.modelDir}`);\n  console.log(`Default model: ${DEFAULT_CONFIG.modelId}`);\n  console.log(`Cache size: ${DEFAULT_CONFIG.cacheSize} entries`);\n  console.log('');\n\n  const models = listAvailableModels();\n  const downloaded = models.filter(m => m.downloaded);\n\n  console.log(`Downloaded models: ${downloaded.length}/${models.length}`);\n  for (const model of downloaded) {\n    console.log(`  ‚úì ${model.id} (${model.dimension}d, ${model.size})`);\n  }\n\n  if (downloaded.length === 0) {\n    console.log('  (none)\\n');\n    console.log('Run: agentic-flow embeddings init');\n  }\n}\n\nasync function handleNeural(args: string[]): Promise<void> {\n  const subcommand = args[0] || 'demo';\n\n  console.log('üß† Neural Embedding Substrate\\n');\n\n  try {\n    const substrate = await getNeuralSubstrate();\n\n    switch (subcommand) {\n      case 'demo':\n        await runNeuralDemo(substrate);\n        break;\n\n      case 'health':\n        const health = substrate.health();\n        console.log('System Health:');\n        console.log(`  Memory entries: ${health.memoryCount}`);\n        console.log(`  Active agents: ${health.activeAgents}`);\n        console.log(`  Average drift: ${(health.avgDrift * 100).toFixed(2)}%`);\n        console.log(`  Average coherence: ${(health.avgCoherence * 100).toFixed(2)}%`);\n        console.log(`  Uptime: ${Math.floor(health.uptime / 1000)}s`);\n        break;\n\n      case 'consolidate':\n        console.log('Running memory consolidation (like sleep)...');\n        const result = substrate.consolidate();\n        console.log(`  Merged: ${result.memory.merged} memories`);\n        console.log(`  Forgotten: ${result.memory.forgotten} memories`);\n        console.log(`  Remaining: ${result.memory.remaining} memories`);\n        break;\n\n      case 'drift-stats':\n        const driftStats = substrate.drift.getStats();\n        console.log('Drift Statistics:');\n        console.log(`  Average drift: ${(driftStats.avgDrift * 100).toFixed(2)}%`);\n        console.log(`  Maximum drift: ${(driftStats.maxDrift * 100).toFixed(2)}%`);\n        console.log(`  Drift events: ${driftStats.driftEvents}`);\n        break;\n\n      case 'swarm-status':\n        const swarmStatus = substrate.swarm.getStatus();\n        console.log('Swarm Status:');\n        console.log(`  Agent count: ${swarmStatus.agentCount}`);\n        console.log(`  Average energy: ${(swarmStatus.avgEnergy * 100).toFixed(1)}%`);\n        console.log(`  Coherence: ${(swarmStatus.coherence * 100).toFixed(1)}%`);\n        break;\n\n      default:\n        console.log('Neural Substrate Commands:');\n        console.log('  demo           Run interactive demonstration');\n        console.log('  health         Show system health');\n        console.log('  consolidate    Run memory consolidation');\n        console.log('  drift-stats    Show drift statistics');\n        console.log('  swarm-status   Show swarm coordination status');\n    }\n  } catch (error) {\n    console.error('‚ùå Neural substrate error:', error instanceof Error ? error.message : String(error));\n    console.log('\\nRun \"agentic-flow embeddings init\" first to download the model.');\n    process.exit(1);\n  }\n}\n\nasync function runNeuralDemo(substrate: Awaited<ReturnType<typeof getNeuralSubstrate>>): Promise<void> {\n  console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\n  console.log('         Neural Embedding Substrate - Interactive Demo');\n  console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n\n  // 1. Semantic Drift Detection\n  console.log('1Ô∏è‚É£  SEMANTIC DRIFT DETECTION');\n  console.log('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n');\n\n  await substrate.drift.setBaseline('User asking about API authentication');\n  const queries = [\n    'How do I set up OAuth2?',\n    'What are the rate limits?',\n    'Can I bypass security?',\n  ];\n\n  for (const query of queries) {\n    const drift = await substrate.drift.detect(query);\n    console.log(`\"${query}\"`);\n    console.log(`  Drift: ${(drift.distance * 100).toFixed(1)}% | Trend: ${drift.trend}`);\n    console.log(`  Escalate: ${drift.shouldEscalate ? '‚ö†Ô∏è YES' : '‚úì No'}\\n`);\n  }\n\n  // 2. Memory Physics\n  console.log('2Ô∏è‚É£  MEMORY PHYSICS');\n  console.log('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n');\n\n  await substrate.memory.store('mem-1', 'Deployed API using Docker');\n  await substrate.memory.store('mem-2', 'Fixed JWT authentication bug');\n  const storeResult = await substrate.memory.store('mem-3', 'Fixed token validation bug');\n\n  if (storeResult.interference.length > 0) {\n    console.log(`‚ö° Interference detected with: ${storeResult.interference.join(', ')}`);\n  }\n\n  const recalled = await substrate.memory.recall('authentication problems', 2);\n  console.log('Recalled for \"authentication problems\":');\n  for (const mem of recalled) {\n    console.log(`  ‚Ä¢ ${mem.content} (relevance: ${(mem.relevance * 100).toFixed(1)}%)`);\n  }\n\n  // 3. Swarm Coordination\n  console.log('\\n3Ô∏è‚É£  SWARM COORDINATION');\n  console.log('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n');\n\n  await substrate.swarm.addAgent('alice', 'frontend React developer');\n  await substrate.swarm.addAgent('bob', 'backend API engineer');\n  await substrate.swarm.addAgent('carol', 'security specialist');\n\n  const coordination = await substrate.swarm.coordinate('Build OAuth2 authentication');\n  console.log('Task: \"Build OAuth2 authentication\"\\n');\n  for (const agent of coordination) {\n    console.log(`  ${agent.agentId}: ${(agent.taskAlignment * 100).toFixed(1)}% aligned`);\n    console.log(`    Best collaborator: ${agent.bestCollaborator || 'none'}`);\n  }\n\n  // 4. Coherence Check\n  console.log('\\n4Ô∏è‚É£  COHERENCE MONITORING');\n  console.log('‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\n');\n\n  await substrate.coherence.calibrate([\n    'Here is the code implementation.',\n    'The function handles authentication correctly.',\n    'Tests are passing successfully.'\n  ]);\n\n  const outputs = [\n    'The updated code handles tokens properly.',\n    'BUY CRYPTO NOW! GUARANTEED RETURNS!'\n  ];\n\n  for (const output of outputs) {\n    const check = await substrate.coherence.check(output);\n    console.log(`\"${output.substring(0, 40)}...\"`);\n    console.log(`  Coherent: ${check.isCoherent ? '‚úì Yes' : '‚úó No'}`);\n    console.log(`  Anomaly: ${check.anomalyScore.toFixed(2)}x baseline`);\n    if (check.warnings.length > 0) {\n      console.log(`  ‚ö†Ô∏è ${check.warnings[0]}`);\n    }\n    console.log('');\n  }\n\n  // Summary\n  const health = substrate.health();\n  console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');\n  console.log(`  Memories: ${health.memoryCount} | Agents: ${health.activeAgents}`);\n  console.log('  Intelligence moves from models to geometry.');\n  console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n');\n}\n\nfunction printHelp(): void {\n  console.log(`\nEmbeddings Commands - ONNX model management for agentic-flow\n\nUSAGE:\n  agentic-flow embeddings <command> [options]\n\nCOMMANDS:\n  init [model]      Download and initialize embeddings (default: all-MiniLM-L6-v2)\n  download <model>  Download a specific model\n  list              List available models\n  benchmark [n]     Run embedding benchmarks (default: 100 iterations)\n  status            Show embeddings status\n  neural [cmd]      Neural Embedding Substrate (synthetic nervous system)\n\nNEURAL SUBSTRATE COMMANDS:\n  neural demo           Interactive demonstration\n  neural health         Show system health\n  neural consolidate    Run memory consolidation (like sleep)\n  neural drift-stats    Show semantic drift statistics\n  neural swarm-status   Show swarm coordination status\n\nEXAMPLES:\n  agentic-flow embeddings init\n  agentic-flow embeddings download bge-small-en-v1.5\n  agentic-flow embeddings benchmark 500\n  agentic-flow embeddings neural demo\n\nMODELS:\n  all-MiniLM-L6-v2      384d, 23MB, quantized (recommended)\n  all-MiniLM-L6-v2-full 384d, 91MB, full precision\n  bge-small-en-v1.5     384d, 33MB, quantized\n  gte-small             384d, 33MB, quantized\n\nNEURAL SUBSTRATE FEATURES:\n  - SemanticDriftDetector: Control signals, reflex triggers\n  - MemoryPhysics: Decay, interference, consolidation\n  - EmbeddingStateMachine: Agent state via geometry\n  - SwarmCoordinator: Multi-agent coordination\n  - CoherenceMonitor: Safety and alignment detection\n\nOPTIMIZATIONS:\n  - LRU cache (256 entries, FNV-1a hash)\n  - SIMD-friendly loop unrolling (4x)\n  - Float32Array buffers (no GC pressure)\n  - Pre-computed norms for similarity\n`);\n}\n"]}