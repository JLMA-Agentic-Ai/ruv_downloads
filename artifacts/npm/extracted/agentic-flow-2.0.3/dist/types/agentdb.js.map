{"version":3,"file":"agentdb.js","sourceRoot":"","sources":["../../src/types/agentdb.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AAkPH;;GAEG;AACH,MAAM,OAAO,YAAa,SAAQ,KAAK;IAGnB;IACA;IACA;IAJlB,YACE,OAAe,EACC,IAAY,EACZ,SAA0B,EAC1B,OAAa;QAE7B,KAAK,CAAC,OAAO,CAAC,CAAC;QAJC,SAAI,GAAJ,IAAI,CAAQ;QACZ,cAAS,GAAT,SAAS,CAAiB;QAC1B,YAAO,GAAP,OAAO,CAAM;QAG7B,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC;IAC7B,CAAC;CACF;AAED;;GAEG;AACH,MAAM,OAAO,eAAgB,SAAQ,YAAY;IAC/C,YAAY,OAAe,EAAE,OAAa;QACxC,KAAK,CAAC,OAAO,EAAE,kBAAkB,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;QACtD,IAAI,CAAC,IAAI,GAAG,iBAAiB,CAAC;IAChC,CAAC;CACF;AAED;;GAEG;AACH,MAAM,OAAO,aAAc,SAAQ,YAAY;IAC7C,YAAY,OAAe,EAAE,SAA0B,EAAE,OAAa;QACpE,KAAK,CAAC,OAAO,EAAE,gBAAgB,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QACrD,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC;IAC9B,CAAC;CACF;AAED;;GAEG;AACH,MAAM,OAAO,UAAW,SAAQ,YAAY;IAC1C,YAAY,OAAe,EAAE,SAA0B,EAAE,OAAa;QACpE,KAAK,CAAC,OAAO,EAAE,aAAa,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;QAClD,IAAI,CAAC,IAAI,GAAG,YAAY,CAAC;IAC3B,CAAC;CACF","sourcesContent":["/**\n * TypeScript type definitions for AgentDB wrapper\n *\n * Provides clean, typed interfaces for all AgentDB operations\n * following v2.0.0-alpha.2.11 specification\n */\n\n/**\n * Vector search metrics supported by AgentDB\n */\nexport type DistanceMetric = 'cosine' | 'euclidean' | 'dot' | 'manhattan';\n\n/**\n * HNSW index configuration\n */\nexport interface HNSWConfig {\n  /** Maximum number of connections per element (default: 16) */\n  M?: number;\n  /** Size of dynamic candidate list during construction (default: 200) */\n  efConstruction?: number;\n  /** Size of dynamic candidate list during search (default: 100) */\n  efSearch?: number;\n}\n\n/**\n * Vector embedding with metadata\n */\nexport interface VectorEntry {\n  /** Unique identifier for the vector */\n  id: string;\n  /** Vector embedding (Float32Array for performance) */\n  vector: Float32Array;\n  /** Optional metadata for filtering and retrieval */\n  metadata?: Record<string, any>;\n  /** Timestamp of insertion */\n  timestamp?: number;\n}\n\n/**\n * Vector search result\n */\nexport interface VectorSearchResult {\n  /** Vector entry ID */\n  id: string;\n  /** Similarity score (higher = more similar) */\n  score: number;\n  /** Metadata associated with the vector */\n  metadata?: Record<string, any>;\n  /** Optional vector data if requested */\n  vector?: Float32Array;\n}\n\n/**\n * Vector search options\n */\nexport interface VectorSearchOptions {\n  /** Number of results to return (default: 10) */\n  k?: number;\n  /** Distance metric (default: 'cosine') */\n  metric?: DistanceMetric;\n  /** Metadata filters (key-value pairs) */\n  filter?: Record<string, any>;\n  /** Include vector data in results (default: false) */\n  includeVectors?: boolean;\n  /** HNSW-specific search parameters */\n  hnswParams?: {\n    efSearch?: number;\n  };\n}\n\n/**\n * Memory operation types\n */\nexport type MemoryOperation = 'insert' | 'search' | 'update' | 'delete' | 'get';\n\n/**\n * Memory insert options\n */\nexport interface MemoryInsertOptions {\n  /** Vector embedding */\n  vector: Float32Array;\n  /** Metadata for the memory */\n  metadata?: Record<string, any>;\n  /** Optional custom ID (auto-generated if not provided) */\n  id?: string;\n  /** Namespace for organizing memories */\n  namespace?: string;\n}\n\n/**\n * Memory update options\n */\nexport interface MemoryUpdateOptions {\n  /** Vector ID to update */\n  id: string;\n  /** New vector embedding (optional) */\n  vector?: Float32Array;\n  /** New metadata (merged with existing) */\n  metadata?: Record<string, any>;\n  /** Namespace */\n  namespace?: string;\n}\n\n/**\n * Memory delete options\n */\nexport interface MemoryDeleteOptions {\n  /** Vector ID to delete */\n  id: string;\n  /** Namespace */\n  namespace?: string;\n}\n\n/**\n * Memory get options\n */\nexport interface MemoryGetOptions {\n  /** Vector ID to retrieve */\n  id: string;\n  /** Namespace */\n  namespace?: string;\n  /** Include vector data (default: true) */\n  includeVector?: boolean;\n}\n\n/**\n * Attention mechanism types\n */\nexport type AttentionType = 'multi-head' | 'flash' | 'linear' | 'hyperbolic' | 'moe' | 'graph-rope';\n\n/**\n * Attention configuration\n */\nexport interface AttentionConfig {\n  /** Attention type */\n  type?: AttentionType;\n  /** Number of attention heads (default: 8) */\n  numHeads?: number;\n  /** Head dimension (default: 64) */\n  headDim?: number;\n  /** Embedding dimension (inferred from vector dimension) */\n  embedDim?: number;\n  /** Dropout rate (default: 0.1) */\n  dropout?: number;\n  /** Hyperbolic curvature for hyperbolic attention */\n  curvature?: number;\n  /** Number of experts for MoE attention */\n  numExperts?: number;\n  /** Top-k experts to activate (default: 2) */\n  topK?: number;\n}\n\n/**\n * GNN configuration\n */\nexport interface GNNConfig {\n  /** Enable GNN query refinement (default: false) */\n  enabled?: boolean;\n  /** Input dimension (matches vector dimension) */\n  inputDim?: number;\n  /** Hidden layer dimension (default: 256) */\n  hiddenDim?: number;\n  /** Number of GNN layers (default: 3) */\n  numLayers?: number;\n  /** Number of attention heads per layer (default: 8) */\n  numHeads?: number;\n  /** Aggregation method */\n  aggregation?: 'mean' | 'sum' | 'max' | 'attention';\n}\n\n/**\n * Graph context for GNN operations\n */\nexport interface GraphContext {\n  /** Node features (embeddings) */\n  nodes: Float32Array[];\n  /** Edge list [source, target] pairs */\n  edges: [number, number][];\n  /** Optional edge weights */\n  edgeWeights?: number[];\n  /** Optional node labels */\n  nodeLabels?: string[];\n}\n\n/**\n * AgentDB configuration\n */\nexport interface AgentDBConfig {\n  /** Database file path (default: ':memory:') */\n  dbPath?: string;\n  /** Namespace for organizing data */\n  namespace?: string;\n  /** Vector dimension (default: 384) */\n  dimension?: number;\n  /** HNSW index configuration */\n  hnswConfig?: HNSWConfig;\n  /** Enable attention mechanisms (default: false) */\n  enableAttention?: boolean;\n  /** Attention configuration */\n  attentionConfig?: AttentionConfig;\n  /** Enable GNN query refinement (default: false) */\n  enableGNN?: boolean;\n  /** GNN configuration */\n  gnnConfig?: GNNConfig;\n  /** Enable auto-initialization (default: true) */\n  autoInit?: boolean;\n}\n\n/**\n * Statistics about the AgentDB instance\n */\nexport interface AgentDBStats {\n  /** Total number of vectors */\n  vectorCount: number;\n  /** Vector dimension */\n  dimension: number;\n  /** Database size in bytes */\n  databaseSize: number;\n  /** HNSW index statistics */\n  hnswStats?: {\n    M: number;\n    efConstruction: number;\n    efSearch: number;\n    levels: number;\n  };\n  /** Memory usage in bytes */\n  memoryUsage?: number;\n  /** Index build time in ms */\n  indexBuildTime?: number;\n}\n\n/**\n * Batch insert result\n */\nexport interface BatchInsertResult {\n  /** Number of successfully inserted vectors */\n  inserted: number;\n  /** Failed insertions with errors */\n  failed: Array<{\n    index: number;\n    id?: string;\n    error: string;\n  }>;\n  /** Total time in milliseconds */\n  duration: number;\n}\n\n/**\n * Error types for AgentDB operations\n */\nexport class AgentDBError extends Error {\n  constructor(\n    message: string,\n    public readonly code: string,\n    public readonly operation: MemoryOperation,\n    public readonly details?: any\n  ) {\n    super(message);\n    this.name = 'AgentDBError';\n  }\n}\n\n/**\n * Validation error for invalid inputs\n */\nexport class ValidationError extends AgentDBError {\n  constructor(message: string, details?: any) {\n    super(message, 'VALIDATION_ERROR', 'insert', details);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * Database error for storage issues\n */\nexport class DatabaseError extends AgentDBError {\n  constructor(message: string, operation: MemoryOperation, details?: any) {\n    super(message, 'DATABASE_ERROR', operation, details);\n    this.name = 'DatabaseError';\n  }\n}\n\n/**\n * Index error for HNSW operations\n */\nexport class IndexError extends AgentDBError {\n  constructor(message: string, operation: MemoryOperation, details?: any) {\n    super(message, 'INDEX_ERROR', operation, details);\n    this.name = 'IndexError';\n  }\n}\n\n/**\n * Attention result with performance metrics\n */\nexport interface AttentionResult {\n  /** Output tensor */\n  output: Float32Array;\n  /** Attention mechanism used */\n  mechanism: AttentionType;\n  /** Runtime environment (napi or wasm) */\n  runtime: 'napi' | 'wasm' | 'js';\n  /** Execution time in milliseconds */\n  executionTimeMs: number;\n  /** Optional attention weights */\n  attentionWeights?: Float32Array;\n  /** Memory usage in bytes */\n  memoryUsage?: number;\n}\n\n/**\n * GNN refinement result\n */\nexport interface GNNRefinementResult {\n  /** Refined results */\n  results: VectorSearchResult[];\n  /** Original recall */\n  originalRecall: number;\n  /** Improved recall after GNN */\n  improvedRecall: number;\n  /** Recall improvement percentage */\n  improvementPercent: number;\n  /** GNN execution time */\n  executionTimeMs: number;\n}\n\n/**\n * Vector search options with advanced features\n */\nexport interface AdvancedSearchOptions extends VectorSearchOptions {\n  /** Use attention-based reranking */\n  useAttention?: boolean;\n  /** Attention mechanism to use */\n  attentionMechanism?: AttentionType;\n  /** Use GNN query refinement */\n  useGNN?: boolean;\n  /** Graph context for GNN */\n  graphContext?: GraphContext;\n  /** Include performance metrics */\n  includeMetrics?: boolean;\n}\n"]}